{"version":3,"sources":["factory/createLoginUrl.ts","service/cookie.ts","store.tsx","components/Navbar.tsx","service/doFetch.ts","components/Dashboard/Managing.tsx","components/Dashboard/Menu.tsx","types/Rewards.ts","components/Dashboard/RewardForms/BttvForm.tsx","hooks/useChannelPointReward.ts","components/Dashboard/Dashboard.tsx","hooks/useUserConfig.ts","components/Home/Teaser.tsx","components/Home/Home.tsx","App.tsx","index.tsx"],"names":["createLoginUrl","apiBaseUrl","twitchClientId","url","URL","searchParams","set","deleteCookie","name","value","days","d","Date","setTime","getTime","document","cookie","toUTCString","setCookie","store","PStore","process","baseUrl","scToken","v","match","getCookie","managing","Navbar","useState","s","buttons","Login","className","LoggedIn","to","getRawState","href","toString","Method","RejectReason","doFetch","method","path","a","body","undefined","headers","Authorization","config","JSON","stringify","window","fetch","then","response","status","location","assign","ok","text","parse","Promise","reject","NotFound","errorMessage","Managing","userConfig","Protected","EditorFor","length","onChange","e","update","target","map","editorFor","Menu","setUserConfig","EditorManager","loadedEditors","Editors","editor","Object","values","editors","setEditors","changeEditor","id","newEditors","editorInputs","entries","sort","key","push","EditorInput","creatingNewEditor","filter","onClick","setValue","ref","useRef","spellCheck","type","onKeyDown","keyCode","current","blur","handleKeyPress","onBlur","RewardTypes","defaultReward","OwnerTwitchID","Type","Bttv","Title","Cost","Prompt","BackgroundColor","IsMaxPerStreamEnabled","MaxPerStream","IsUserInputRequired","MaxPerUserPerStream","IsMaxPerUserPerStreamEnabled","IsGlobalCooldownEnabled","GlobalCooldownSeconds","ShouldRedemptionsSkipRequestQueue","Enabled","BttvForm","useForm","register","handleSubmit","errors","formState","userID","reward","setReward","fetchReward","GET","catch","reason","Error","useEffect","POST","DELETE","useChannelPointReward","CurrentUserID","deleteReward","onSubmit","data","rewardData","title","Number","cost","backgroundColor","Boolean","maxPerStream","maxPerUserPerStream","globalCooldownMinutes","enabled","src","alt","RewardID","defaultValue","required","disabled","placeholder","pattern","defaultChecked","Dashboard","useTitle","changeCounter","setChangeCounter","fetchConfig","endPoint","useDebounce","useUserConfig","userCfg","Teaser","Home","App","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.4e292e31.chunk.js","sourcesContent":["export function createLoginUrl(apiBaseUrl: string, twitchClientId: string): URL {\n    const url = new URL(\"https://id.twitch.tv/oauth2/authorize\")\n    url.searchParams.set(\"client_id\", twitchClientId);\n    url.searchParams.set(\"redirect_uri\", apiBaseUrl + \"/api/callback\");\n    url.searchParams.set(\"response_type\", \"code\");\n    url.searchParams.set(\"scope\", \"channel:read:redemptions channel:manage:redemptions\");\n\n    return url;\n}","export function getCookie(name: string): string | null {\n    const v = document.cookie.match('(^|;) ?' + name + '=([^;]*)(;|$)');\n    return v ? v[2] : null;\n}\n\nexport function setCookie(name: string, value: string, days: number) {\n    const d = new Date();\n    d.setTime(d.getTime() + 24 * 60 * 60 * 1000 * days);\n    document.cookie = name + \"=\" + value + \";path=/;expires=\" + d.toUTCString();\n}\n\nexport function deleteCookie(name: string) {\n    setCookie(name, '', -1);\n}\n","import { Store as PStore } from \"pullstate\";\nimport { getCookie } from \"./service/cookie\";\n\nexport interface Store {\n    twitchClientId: string,\n    baseUrl: string,\n    apiBaseUrl: string,\n    scToken: string | null,\n    managing: string,\n}\n\nexport const store = new PStore<Store>({\n    twitchClientId: process.env.REACT_APP_TWITCH_CLIENT_ID ?? \"\",\n    apiBaseUrl: process.env.REACT_APP_API_BASE_URL ?? \"\",\n    baseUrl: process.env.REACT_APP_BASE_URL ?? \"\",\n    scToken: getCookie(\"scToken\"),\n    managing: \"\",\n});","import { Link } from \"react-router-dom\";\nimport { createLoginUrl } from \"../factory/createLoginUrl\";\nimport { store } from \"../store\";\n\n\nexport function Navbar() {\n    const scToken = store.useState(s => s.scToken);\n\n    let buttons = <Login className=\"p-4 rounded shadow bg-purple-800 hover:bg-purple-600\" />\n\n    if (scToken) {\n        buttons = <LoggedIn />;\n    }\n\n    return <div className=\"m-4 flex flex-row justify-end gap-4\">\n        {buttons}\n    </div>;\n}\n\nfunction LoggedIn() {\n    return <>\n        <Link to=\"/\" className=\"p-4 rounded shadow bg-gray-800 hover:bg-gray-700\">\n            Home\n        </Link>\n        <Link to=\"/dashboard\" className=\"p-4 rounded shadow bg-blue-900 hover:bg-blue-800\">\n            Dashboard\n        </Link>\n        <Login className={`p-4 rounded shadow opacity-25 bg-purple-800 hover:bg-purple-600`} />\n    </>;\n}\n\nfunction Login({ className }: { className?: string }) {\n    const { apiBaseUrl, twitchClientId } = store.getRawState();\n    const url = createLoginUrl(apiBaseUrl, twitchClientId);\n\n    return <a className={className} href={url.toString()}>Login</a>\n}","import { store } from \"../store\";\nimport { deleteCookie } from \"./cookie\";\n\nexport enum Method {\n    GET = \"GET\",\n    POST = \"POST\",\n    DELETE = \"DELETE\",\n    PATCH = \"PATCH\"\n}\n\nexport enum RejectReason {\n    NotFound = '{\"message\":\"Not Found\"}'\n}\n\nexport async function doFetch(method: Method, path: string, body: any = undefined) {\n    const { apiBaseUrl, scToken } = store.getRawState();\n\n    const headers: Record<string, string> = { 'content-type': 'application/json' }\n    if (scToken) {\n        headers.Authorization = `Bearer ${scToken}`\n    }\n\n    const config: RequestInit = {\n        method: method,\n        headers: {\n            ...headers,\n        },\n    }\n\n    if (body) {\n        config.body = JSON.stringify(body)\n    }\n\n    return window.fetch(`${apiBaseUrl}${path}`, config)\n        .then(async response => {\n            if (response.status === 401) {\n                deleteCookie(\"scToken\");\n                window.location.assign(\"/\")\n                return\n            }\n            if (response.ok) {\n                const text = await response.text();\n                return text !== \"\" ? JSON.parse(text) : null\n            } else {\n                if (response.status === 404) {\n                    return Promise.reject(RejectReason.NotFound);\n                }\n\n                const errorMessage = await response.text()\n                return Promise.reject(errorMessage)\n            }\n        })\n}","import { UserConfig } from \"../../hooks/useUserConfig\";\nimport { store } from \"../../store\";\n\nexport function Managing({ userConfig }: { userConfig: UserConfig | null | undefined }) {\n    if (userConfig?.Protected.EditorFor.length === 0) {\n        return null;\n    }\n    const managing = store.useState(s => s.managing);\n\n    return <div className=\"Managing\">\n        <select className=\"bg-gray-800 shadow rounded p-3\" onChange={e => store.update(s => { s.managing = e.target.value })} value={managing}>\n            {userConfig?.Protected.EditorFor.map(editorFor => <option key={editorFor} value={editorFor}>{editorFor}</option>)}\n            <option value=\"\">you</option>\n        </select>\n    </div>\n}","import React, { KeyboardEvent, useRef, useState } from \"react\";\nimport { SetUserConfig, UserConfig } from \"../../hooks/useUserConfig\";\nimport { store } from \"../../store\";\nimport { Managing } from \"./Managing\";\n\nexport function Menu({ userConfig, setUserConfig }: { userConfig: UserConfig | null | undefined, setUserConfig: SetUserConfig }) {\n    return <div className=\"flex flex-row flex-wrap gap-4 ml-4\">\n        <Managing userConfig={userConfig} />\n        <EditorManager setUserConfig={setUserConfig} userConfig={userConfig} />\n    </div>\n}\n\nfunction EditorManager({ setUserConfig, userConfig }: { setUserConfig: SetUserConfig, userConfig: UserConfig | null | undefined }) {\n    const managing = store.useState(s => s.managing);\n    \n    const loadedEditors: Record<string, string> = {};\n    userConfig?.Editors.map(editor => {\n        loadedEditors[\"e\" + (Object.values(loadedEditors).length + 1)] = editor\n        return editor;\n    });\n\n    const [editors, setEditors] = useState<Record<string, string>>(loadedEditors);\n\n    const changeEditor = (id: string, value: string | null) => {\n        const newEditors = { ...editors };\n\n        if (value === null) {\n            delete newEditors[id];\n            setEditors(newEditors);\n        } else {\n            newEditors[id] = value;\n            setEditors(newEditors);\n        }\n\n        // @ts-ignore\n        setUserConfig({ ...userConfig, Editors: Object.values(newEditors) })\n    };\n\n    const editorInputs = [];\n    for (const [key, value] of Object.entries(editors).sort()) {\n        editorInputs.push(<EditorInput key={key} editor={value} id={key} onChange={changeEditor} />);\n    }\n\n    const creatingNewEditor = Object.values(editors).filter(editor => editor.length === 0).length === 0;\n\n    if (managing !== \"\") {\n        return null;\n    }\n\n    return <>\n        {editorInputs}\n        {creatingNewEditor && <div className=\"bg-green-700 rounded shadow p-3 cursor-pointer hover:bg-green-600\" onClick={() => {\n            const newEditors = { ...editors };\n            newEditors[\"e\" + (Object.values(editors).length + 1)] = \"\";\n            setEditors(newEditors);\n        }}>add editor</div>}\n    </>\n}\n\nfunction EditorInput({ id, editor, onChange }: { id: string, editor: string, onChange: (id: string, value: string | null) => void }) {\n    const [value, setValue] = useState(editor);\n    const ref = useRef<HTMLInputElement>(null);\n\n    const handleKeyPress = (e: KeyboardEvent) => {\n        if (e.keyCode === 13) {\n            if (ref.current !== null) {\n                ref.current.blur();\n            }\n        }\n    };\n\n    return <div className=\"flex items-center\">\n        <input className=\"bg-blue-900 hover:bg-blue-800 focus:bg-blue:800 p-3 rounded shadow w-24 rounded-r-none truncate\" spellCheck={false} ref={ref} type=\"text\" value={value} onKeyDown={(e) => handleKeyPress(e)} onChange={(e) => setValue(e.target.value)} onBlur={() => onChange(id, value)} key={editor} />\n        <span className=\"bg-red-900 p-3 px-1 font-bold opacity-25 hover:opacity-100 cursor-pointer rounded rounded-l-none\" onClick={() => onChange(id, null)}>X</span>\n    </div>;\n}","export enum RewardTypes {\n    Bttv = \"bttv\"\n}\n\nexport interface ChannelPointReward {\n    OwnerTwitchID: string\n    Type: RewardTypes\n    Title: string\n    Cost: number\n    Prompt: string\n    BackgroundColor: string\n    IsMaxPerStreamEnabled: boolean\n    MaxPerStream: number\n    IsUserInputRequired: boolean\n    IsMaxPerUserPerStreamEnabled: boolean\n    MaxPerUserPerStream: number\n    IsGlobalCooldownEnabled: boolean\n    GlobalCooldownSeconds: number\n    ShouldRedemptionsSkipRequestQueue: boolean\n    Enabled: boolean\n    RewardID?: string\n}","import { useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useChannelPointReward } from \"../../../hooks/useChannelPointReward\";\nimport { UserConfig } from \"../../../hooks/useUserConfig\";\nimport { ChannelPointReward, RewardTypes } from \"../../../types/Rewards\";\n\ninterface BttvRewardForm {\n    title: string;\n    cost: string;\n    backgroundColor: string;\n    maxPerStream: string;\n    maxPerUserPerStream: string;\n    globalCooldownMinutes: string;\n    enabled: boolean;\n    isDefault: boolean\n}\n\nconst defaultReward = {\n    OwnerTwitchID: \"\",\n    Type: RewardTypes.Bttv,\n    Title: \"BetterTTV Emote\",\n    Cost: 10000,\n    Prompt: \"Add a BetterTTV emote! In the text field, send a link to the BetterTTV emote. powered by bitraft.gempir.com\",\n    BackgroundColor: \"\",\n    IsMaxPerStreamEnabled: false,\n    MaxPerStream: 0,\n    IsUserInputRequired: true,\n    MaxPerUserPerStream: 0,\n    IsMaxPerUserPerStreamEnabled: false,\n    IsGlobalCooldownEnabled: false,\n    GlobalCooldownSeconds: 0,\n    ShouldRedemptionsSkipRequestQueue: false,\n    Enabled: false\n}\n\nexport function BttvForm({ userConfig }: { userConfig: UserConfig }) {\n    const { register, handleSubmit, formState: { errors }, setValue } = useForm();\n    const [reward, setReward, deleteReward] = useChannelPointReward(userConfig?.Protected.CurrentUserID, RewardTypes.Bttv, defaultReward);\n    const onSubmit = (data: BttvRewardForm) => {\n        const rewardData: ChannelPointReward = {\n            OwnerTwitchID: userConfig?.Protected.CurrentUserID,\n            Type: RewardTypes.Bttv,\n            Title: data.title,\n            Prompt: defaultReward.Prompt,\n            Cost: Number(data.cost),\n            BackgroundColor: data.backgroundColor,\n            IsMaxPerStreamEnabled: Boolean(data.maxPerStream),\n            MaxPerStream: Number(data.maxPerStream),\n            IsUserInputRequired: true,\n            MaxPerUserPerStream: Number(data.maxPerUserPerStream),\n            IsMaxPerUserPerStreamEnabled: Boolean(data.maxPerUserPerStream),\n            IsGlobalCooldownEnabled: Boolean(data.globalCooldownMinutes),\n            GlobalCooldownSeconds: Number(data.globalCooldownMinutes) * 60,\n            ShouldRedemptionsSkipRequestQueue: false,\n            Enabled: data.enabled\n        };\n\n        setReward(rewardData);\n    }\n\n    useEffect(() => {\n        setValue(\"title\", reward.Title);\n        setValue(\"prompt\", reward.Prompt);\n        setValue(\"cost\", reward.Cost);\n        setValue(\"backgroundColor\", reward.BackgroundColor);\n        setValue(\"maxPerStream\", reward.MaxPerStream);\n        setValue(\"maxPerUserPerStream\", reward.MaxPerUserPerStream);\n        setValue(\"globalCooldownMinutes\", reward.GlobalCooldownSeconds / 60);\n        setValue(\"enabled\", reward.Enabled);\n    }, [reward, setValue]);\n\n    return (\n        <form onSubmit={handleSubmit(onSubmit)} className=\"max-w-5xl m-4 p-4 bg-gray-800 rounded shadow\">\n            <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-5\">\n                    <img src=\"/images/bttv.png\" alt=\"BetterTTV Logo\" className=\"w-16\" />\n                    <h3 className=\"text-xl font-bold\">BetterTTV Emote</h3>\n                </div>\n                <div className=\"text-gray-600\">\n                    {reward?.RewardID &&\n                        <div className=\"bg-red-700 hover:bg-red-600 p-2 rounded shadow mt-3 text-gray-100 inline-block ml-3 cursor-pointer\" onClick={deleteReward}>\n                            Delete\n                        </div>\n                    }\n                </div>\n            </div>\n            <p className=\"my-2 mb-4 text-gray-400\">\n                <strong>Make sure <span className=\"text-green-600\">gempbot</span> is BetterTTV editor</strong><br />\n                This will swap out 1 emote constantly. If the previous emote is not found it will use a free slot or remove a random emote.\n            </p>\n\n            <label className=\"block\">\n                Title\n                <input defaultValue={reward.Title} spellCheck={false} {...register(\"title\", { required: true })} className=\"form-input border-none bg-gray-700 mx-2 p-2 rounded shadow\" />\n                {errors.title && <span className=\"text-red-700\">required</span>}\n            </label>\n\n            <label className=\"block mt-3\">\n                Cost\n                <input defaultValue={reward.Cost} type=\"number\" spellCheck={false} {...register(\"cost\", { required: true })} className=\"form-input border-none bg-gray-700 mx-2 p-2 rounded shadow\" />\n                {errors.cost && <span className=\"text-red-700\">required</span>}\n            </label>\n\n            <label className=\"block mt-3\">\n                Prompt\n                <input defaultValue={reward.Prompt} spellCheck={false} disabled {...register(\"prompt\")} className=\"block cursor-not-allowed truncate form-input w-full opacity-25 border-none bg-gray-700 mt-2 p-2 rounded shadow\" />\n            </label>\n\n            <label className=\"block mt-3\">\n                Background Color\n                <input defaultValue={reward.BackgroundColor} placeholder=\"#FFFFFF\" pattern=\"^#+([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$\" spellCheck={false} {...register(\"backgroundColor\")} className=\"form-input border-none bg-gray-700 mx-2 p-2 rounded shadow\" />\n            </label>\n\n            <div className=\"mt-8 font-bold\">Limits <span className=\"text-gray-500\">(0 = unlimited)</span></div>\n\n            <label className=\"flex items-center mt-3\">\n                Max per Stream\n                <input defaultValue={reward.MaxPerStream} placeholder=\"0\" type=\"number\" spellCheck={false} {...register(\"maxPerStream\")} className=\"form-input border-none bg-gray-700 mx-2 p-2 rounded shadow\" />\n            </label>\n\n            <label className=\"flex items-center mt-3\">\n                Max per User per Stream\n                <input defaultValue={reward.MaxPerUserPerStream} placeholder=\"0\" type=\"number\" spellCheck={false} {...register(\"maxPerUserPerStream\")} className=\"form-input border-none bg-gray-700 mx-2 p-2 rounded shadow\" />\n            </label>\n\n            <label className=\"flex items-center mt-3\">\n                Global Cooldown in Minutes\n                <input defaultValue={(reward.GlobalCooldownSeconds ?? 0) / 60} placeholder=\"0\" type=\"number\" spellCheck={false} {...register(\"globalCooldownMinutes\")} className=\"form-input border-none bg-gray-700 mx-2 p-2 rounded shadow\" />\n            </label>\n\n            <div className=\"flex flex-row justify-between items-center select-none\">\n                <label className=\"flex items-center\">\n                    <input defaultChecked={reward.Enabled} type=\"checkbox\" {...register(\"enabled\")} className=\"form-checkbox rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-offset-0 focus:ring-indigo-200 focus:ring-opacity-50\" />\n                    <span className=\"ml-2\">Enabled</span>\n                </label>\n                <input type=\"submit\" className=\"bg-green-700 hover:bg-green-600 p-2 rounded shadow block mt-3 cursor-pointer\" value=\"save\" />\n            </div>\n        </form>\n    );\n}","import { useEffect, useState } from \"react\";\nimport { doFetch, Method, RejectReason } from \"../service/doFetch\";\nimport { ChannelPointReward, RewardTypes } from \"../types/Rewards\";\n\nexport function useChannelPointReward(userID: string, type: RewardTypes, defaultReward: ChannelPointReward): [ChannelPointReward, (reward: ChannelPointReward) => void, () => void] {\n    const [reward, setReward] = useState<ChannelPointReward>(defaultReward);\n\n    const fetchReward = () => {\n        doFetch(Method.GET, `/api/reward/${userID}/type/${type}`).then(setReward).catch(reason => {\n            if (reason !== RejectReason.NotFound) {\n                throw new Error(reason);\n            }\n            setReward(defaultReward);\n        })\n    }\n\n    useEffect(fetchReward, [userID, type, defaultReward]);\n\n    const updateReward = (reward: ChannelPointReward) => {\n        doFetch(Method.POST, `/api/reward/${userID}`, reward).then(fetchReward);\n    }\n\n    const deleteReward = () => {\n        doFetch(Method.DELETE, `/api/reward/${userID}/type/${type}`, reward).then(fetchReward);\n    }\n\n    return [reward, updateReward, deleteReward];\n}","import { useTitle } from \"react-use\";\nimport { useUserConfig } from \"../../hooks/useUserConfig\";\nimport { Menu } from \"./Menu\";\nimport { BttvForm } from \"./RewardForms/BttvForm\";\n\nexport function Dashboard() {\n    useTitle(\"bitraft - Dashboard\");\n    const [userCfg, setUserConfig] = useUserConfig();\n\n    if (!userCfg) {\n        return null;\n    }\n\n    return <div>\n        <Menu userConfig={userCfg} setUserConfig={setUserConfig} />\n        <BttvForm userConfig={userCfg} />\n    </div>\n}","import { useEffect, useState } from \"react\";\nimport { useDebounce } from \"react-use\";\nimport { doFetch, Method } from \"../service/doFetch\";\nimport { store } from \"../store\";\n\nexport interface UserConfig {\n    Editors: Array<string>;\n    Protected: Protected;\n}\n\nexport interface Rewards {\n    Bttv: null | BttvReward\n}\n\nexport interface BttvReward {\n    title: string;\n    prompt?: string;\n    cost: number;\n    backgroundColor?: string;\n    isMaxPerStreamEnabled?: boolean;\n    maxPerStream?: number;\n    isUserInputRequired?: boolean;\n    isMaxPerUserPerStreamEnabled?: boolean;\n    maxPerUserPerStream?: number;\n    isGlobalCooldownEnabled?: boolean;\n    globalCooldownSeconds?: number;\n    shouldRedemptionsSkipRequestQueue?: boolean;\n    enabled?: boolean;\n    isDefault: boolean;\n    ID?: string;\n}\n\nexport interface Protected {\n    EditorFor: Array<string>;\n    CurrentUserID: string;\n}\n\nexport type SetUserConfig = (userConfig: UserConfig | null) => void;\n\nexport function useUserConfig(): [UserConfig | null | undefined, SetUserConfig, () => void] {\n    const [userConfig, setUserConfig] = useState<UserConfig | null | undefined>(undefined);\n    const [changeCounter, setChangeCounter] = useState(0);\n    const managing = store.useState(s => s.managing);\n\n    const fetchConfig = () => {\n        let endPoint = \"/api/userConfig\";\n        if (managing) {\n            endPoint += `?managing=${managing}`;\n        }\n        doFetch(Method.GET, endPoint).then((userConfig) => setUserConfig(userConfig))\n    };\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    useEffect(fetchConfig, [managing]);\n\n    useDebounce(() => {\n        if (changeCounter && userConfig) {\n            let endPoint = \"/api/userConfig\";\n            if (managing) {\n                endPoint += `?managing=${managing}`;\n            }\n            doFetch(Method.POST, endPoint, userConfig).then(fetchConfig);\n        } else if (changeCounter && userConfig === null) {\n            doFetch(Method.DELETE, \"/api/userConfig\");\n        }\n    }, 500, [changeCounter]);\n\n    const setCfg = (config: UserConfig | null) => {\n        setUserConfig(config);\n        setChangeCounter(changeCounter + 1);\n    };\n\n    return [userConfig, setCfg, fetchConfig]\n}","import { createLoginUrl } from \"../../factory/createLoginUrl\";\nimport { store } from \"../../store\";\n\nexport function Teaser() {\n    const { apiBaseUrl, twitchClientId } = store.useState(s => ({ apiBaseUrl: s.apiBaseUrl, twitchClientId: s.twitchClientId }));\n    const url = createLoginUrl(apiBaseUrl, twitchClientId);\n\n\n    return <section className=\"text-gray-600 body-font\">\n        <div className=\"container px-5 py-24 mx-auto\">\n            <div className=\"flex flex-col text-center w-full mb-20\">\n                <h2 className=\"text-xs text-indigo-400 tracking-widest font-medium title-font mb-1\">bitraft</h2>\n                <h1 className=\"sm:text-3xl text-2xl font-medium title-font mb-4 text-gray-100\">Channel Point Rewards</h1>\n                <p className=\"lg:w-2/3 mx-auto leading-relaxed text-base\">Offer your viewers special channel point rewards</p>\n            </div>\n            <div className=\"flex flex-wrap\">\n                <div className=\"xl:w-1/4 lg:w-1/2 md:w-full px-8 py-6 border-l-2 border-gray-200 border-opacity-60\">\n                    <h2 className=\"text-lg sm:text-xl text-gray-100 font-medium title-font mb-2\">BetterTTV Emotes</h2>\n                    <p className=\"leading-relaxed text-base mb-4 text-gray-400\">Allow viewers to add new BetterTTV emotes to your chat</p>\n                </div>\n            </div>\n            <div className=\"flex justify-center\">\n                <a className=\"m-auto mx-auto mt-16 text-white bg-purple-800 hover:bg-purple-600 border-0 py-2 px-8 focus:outline-none rounded text-lg\" href={url.toString()}>Login to Get Started</a>\n            </div>\n        </div>\n    </section>\n}","import { useTitle } from \"react-use\";\nimport { Teaser } from \"../Home/Teaser\";\n\nexport function Home() {\n    useTitle(\"bitraft\");\n\n    return <div>\n        <Teaser />\n    </div>\n}","import {\n    BrowserRouter as Router,\n    Route, Switch\n} from \"react-router-dom\";\nimport { Navbar } from \"./components/Navbar\";\nimport { Dashboard } from \"./components/Dashboard/Dashboard\";\nimport { Home } from \"./components/Home/Home\";\n\n\nexport function App() {\n    return <Router>\n        <Navbar />\n        <Switch>\n            <Route path=\"/dashboard\">\n                <Dashboard />\n            </Route>\n            <Route path=\"/\">\n                <Home />\n            </Route>\n        </Switch>\n    </Router>\n}","import { StrictMode } from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App';\nimport \"./index.css\";\n\nReactDOM.render(\n    <StrictMode>\n        <App />\n    </StrictMode>,\n    document.getElementById('root')\n);"],"sourceRoot":""}