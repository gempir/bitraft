(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{35:function(e,n,t){"use strict";t.r(n);var r,a,c,i=t(3),s=t(0),o=t.n(s),d=t(19),b=t.n(d),h=t(4),l=t(7),j=t(1),u=h.b.div(r||(r=Object(i.a)(["\n    display: inline-block;\n    background: var(--bg-bright);\n    border: 1px solid var(--bg-brighter);\n    padding: 0.5rem;\n    margin: 1rem;\n    margin-right: 0;\n    margin-bottom: 0;\n"])));function g(e){var n=e.activeChannels,t=e.joinedChannels;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(u,{children:["Joined Channels: ",Object(j.jsx)("strong",{children:t})]}),Object(j.jsxs)(u,{children:["Active Channels: ",Object(j.jsx)("strong",{children:n})]})]})}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{src:"https://static-cdn.jtvnw.net/user-default-pictures-uv/cdd517fe-def4-11e9-948e-784f43822e80-profile_image-70x70.png"},n=e.src;return Object(j.jsx)("img",{src:n,width:"30",height:"30",alt:"profile"})}var m=h.b.div(a||(a=Object(i.a)(["\n    display: flex;\n"])));function O(e){var n=e.records;return Object(j.jsx)(m,{children:n.map((function(e){return Object(j.jsx)(f,{record:e},e.title)}))})}var x=h.b.div(c||(c=Object(i.a)(["\n    background: var(--bg-bright);\n    border: 1px solid var(--bg-brighter);\n    margin: 1rem;\n    margin-right: 0;\n    padding: 1rem;\n\n    h2 {\n        color: var(--text);\n        margin: 0;\n        margin-bottom: 1rem;\n        padding: 0;\n    }\n\n    ol {\n        color: white;\n        font-size: 1.5rem;\n        font-weight: bold;\n        width: 500px;\n        padding: 0;\n        margin: 0;\n        margin-right: 15px;\n        background: var(--lightBackground);\n        border: 1px solid var(--lightBorder);\n        border-radius: 3px;\n\n        li {\n            display: flex;\n            align-items: center;\n            margin-bottom: 0.25rem;\n\n            img {\n                margin-right: 10px;\n            }\n\n            .value {\n                text-align: right;\n                flex: 1 1 auto;\n            }\n        }\n    }\n"])));function f(e){var n=e.record;return Object(j.jsxs)(x,{children:[Object(j.jsx)("h2",{children:n.title}),Object(j.jsx)("ol",{children:n.scores.map((function(e){return Object(j.jsxs)("li",{children:[Object(j.jsx)(p,{src:e.user.profilePicture}),Object(j.jsx)("span",{children:e.user.displayName}),Object(j.jsx)("span",{className:"value",children:e.score})]},e.user.id)}))})]})}var v,w,k,C,S=t(11),y=t(2),T=t(23),U=function e(n,t){Object(T.a)(this,e),function e(){var r=new WebSocket("".concat(n.replace("https://","wss://").replace("http://","ws://"),"/api/ws"));r.onmessage=function(e){t(JSON.parse(e.data))},r.onclose=function(n){console.log("Socket is closed. Reconnect will be attempted in 1 second.",n.reason),setTimeout(e,1e3)},r.onerror=function(e){console.error("Socket encountered error: ",e,"Closing socket"),r.close()}}()},P=t(12),B={state:{apiBaseUrl:"https://spamchamp-api.gempir.com",twitchClientId:"il5oqz0li81219qvw2hs7umntr493e",baseUrl:"https://spamchamp.gempir.com",accessToken:window.localStorage.getItem("accessToken")},setState:function(e){},setAccessToken:function(e){}},I=Object(s.createContext)(B),_=I.Provider,F=function(e){var n=e.children,t=Object(s.useState)(Object(P.a)({},B.state)),r=Object(l.a)(t,2),a=r[0],c=r[1];return Object(j.jsx)(_,{value:{state:a,setState:c,setAccessToken:function(e){return c(Object(P.a)(Object(P.a)({},a),{},{accessToken:e}))}},children:n})},L=h.b.a(v||(v=Object(i.a)(["\n    position: absolute;\n    display: block;\n    color: white;\n    top: 1rem;\n    right: 1rem;\n    padding: 1rem 2rem;\n    text-decoration: none;\n    font-weight: bold;\n    border-radius: 3px;\n    background: var(--twitch);\n\n    &:hover {\n        background: var(--twitch-dark);\n    }\n"])));function z(){var e=Object(s.useContext)(I),n=e.state,t=e.setAccessToken;if(Object(s.useEffect)((function(){var e=window.location.hash;if(window.location.hash="",e){var n=/#access_token=(\w*)&/gi.exec(e);if(!n||"undefined"===typeof n[1])return;n[1]&&(window.localStorage.setItem("accessToken",n[1]),t(n[1]))}}),[n.apiBaseUrl,t]),Object(s.useEffect)((function(){n.accessToken&&fetch(n.apiBaseUrl+"/api/oauth",{method:"post",body:JSON.stringify({accessToken:n.accessToken})})}),[n.accessToken,n.apiBaseUrl]),n.accessToken)return Object(j.jsx)(M,{});var r=new URL("https://id.twitch.tv/oauth2/authorize");return r.searchParams.set("client_id",n.twitchClientId),r.searchParams.set("redirect_uri",n.baseUrl),r.searchParams.set("response_type","token"),r.searchParams.set("scope","channel:read:redemptions"),Object(j.jsx)(L,{href:r.toString(),children:"Login"})}var A,E=h.b.div(w||(w=Object(i.a)(["\n    position: absolute;\n    top: 1rem;\n    right: 1rem;\n    display: flex;\n\n    a {\n        text-decoration: none;\n    }\n"]))),J=h.b.a(k||(k=Object(i.a)(["\n    display: block;\n    color: white;\n    width: 150px;\n    padding: 1rem 2rem;\n    text-decoration: none;\n    font-weight: bold;\n    border-radius: 3px;\n    background: var(--twitch);\n    cursor: pointer;\n\n    &:hover {\n        background: var(--twitch-dark);\n    }\n"]))),N=h.b.div(C||(C=Object(i.a)(["\n    display: block;\n    color: white;\n    margin-right: 1rem;\n    padding: 1rem 2rem;\n    text-decoration: none;\n    font-weight: bold;\n    border-radius: 3px;\n    background: var(--theme2);\n    cursor: pointer;\n\n    &:hover {\n        background: var(--theme2-dark);\n    }\n"])));function M(){var e=Object(s.useContext)(I).state,n=Object(s.useState)("Logged In"),t=Object(l.a)(n,2),r=t[0],a=t[1],c=new URL("https://id.twitch.tv/oauth2/authorize");return c.searchParams.set("client_id",e.twitchClientId),c.searchParams.set("redirect_uri",e.baseUrl),c.searchParams.set("response_type","token"),c.searchParams.set("scope","channel:read:redemptions"),Object(j.jsxs)(E,{children:[Object(j.jsx)(S.b,{to:"/",children:Object(j.jsx)(N,{children:"Home"})}),Object(j.jsx)(S.b,{to:"/dashboard",children:Object(j.jsx)(N,{children:"Dashboard"})}),Object(j.jsx)(J,{href:c.toString(),onMouseEnter:function(){return a("force login")},onMouseLeave:function(){return a("Logged In")},children:r})]})}var R,q=h.b.main(A||(A=Object(i.a)(["\n    \n"])));function H(){var e=Object(s.useContext)(I).state,n=Object(s.useState)(0),t=Object(l.a)(n,2),r=t[0],a=t[1],c=Object(s.useState)(0),i=Object(l.a)(c,2),o=i[0],d=i[1],b=Object(s.useState)([]),h=Object(l.a)(b,2),u=h[0],p=h[1];return Object(s.useEffect)((function(){new U(e.apiBaseUrl,(function(e){a(e.joinedChannels),d(e.activeChannels),p(e.records)}))}),[e.apiBaseUrl]),Object(j.jsx)(q,{children:Object(j.jsxs)(S.a,{children:[Object(j.jsx)(z,{}),Object(j.jsxs)(y.c,{children:[Object(j.jsx)(y.a,{path:"/dashboard"}),Object(j.jsxs)(y.a,{path:"/",children:[Object(j.jsx)(g,{activeChannels:o,joinedChannels:r}),Object(j.jsx)(O,{records:u})]})]})]})})}var D=Object(h.a)(R||(R=Object(i.a)(["\n    body {\n        --bg: #0e0e10;\n        --bg-bright: #18181b;\n        --bg-brighter: #3d4146;\n        --bg-dark: #121416;\n        --theme: #00CC66;\n        --theme-bright: #00FF80;\n        --theme2: #2980b9;\n        --theme2-bright: #3498db;\n        --theme2-dark: #24618a;\n        --text: #F5F5F5;\n        --text-dark: #616161;\n        --twitch: #6441a5;\n        --twitch-dark: #4c317e;\n\n        background: var(--bg);\n        margin: 0;\n        padding: 0;\n        color: var(--text);\n        margin: 0;\n        font-family: Helvetica, Arial, sans-serif;\n        height: 100%;\n        width: 100%;\n\n        * {\n            box-sizing: border-box;\n        }\n    }\n"])));b.a.render(Object(j.jsx)(s.StrictMode,{children:Object(j.jsx)(F,{children:Object(j.jsxs)(o.a.Fragment,{children:[Object(j.jsx)(D,{}),Object(j.jsx)(H,{})]})})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.57ea32d6.chunk.js.map