(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{46:function(e,t,r){},47:function(e,t,r){"use strict";r.r(t);var n,a,s,o=r(0),c=r(28),l=r.n(c),i=r(21),u=r(7);function d(e,t){var r=new URL("https://id.twitch.tv/oauth2/authorize");return r.searchParams.set("client_id",t),r.searchParams.set("redirect_uri",e+"/api/callback"),r.searchParams.set("response_type","code"),r.searchParams.set("scope","channel:read:redemptions channel:manage:redemptions"),r}function b(e){!function(e,t,r){var n=new Date;n.setTime(n.getTime()+864e5*r),document.cookie=e+"="+t+";path=/;expires="+n.toUTCString()}(e,"",-1)}var m=new(r(31).a)({twitchClientId:null!==(n="il5oqz0li81219qvw2hs7umntr493e")?n:"",apiBaseUrl:null!==(a="https://bitraft-api.gempir.com")?a:"",baseUrl:null!==(s="https://bitraft.gempir.com")?s:"",scToken:function(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null}("scToken"),managing:""}),j=r(1);function p(){var e=m.useState((function(e){return e.scToken})),t=Object(j.jsx)(h,{className:"p-4 rounded shadow bg-purple-800 hover:bg-purple-600"});return e&&(t=Object(j.jsx)(x,{})),Object(j.jsx)("div",{className:"m-4 flex flex-row justify-end gap-4",children:t})}function x(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(i.b,{to:"/",className:"p-4 rounded shadow bg-gray-800 hover:bg-gray-700",children:"Home"}),Object(j.jsx)(i.b,{to:"/dashboard",className:"p-4 rounded shadow bg-blue-900 hover:bg-blue-800",children:"Dashboard"}),Object(j.jsx)(h,{className:"p-4 rounded shadow opacity-25 bg-purple-800 hover:bg-purple-600"})]})}function h(e){var t=e.className,r=m.getRawState(),n=d(r.apiBaseUrl,r.twitchClientId);return Object(j.jsx)("a",{className:t,href:n.toString(),children:"Login"})}var f,g,O=r(2),v=r(48),w=r(49),N=r(3),C=r.n(N),y=r(4),S=r(9);function P(e,t){return k.apply(this,arguments)}function k(){return(k=Object(S.a)(C.a.mark((function e(t,r){var n,a,s,o,c,l,i=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:void 0,a=m.getRawState(),s=a.apiBaseUrl,o=a.scToken,c={"content-type":"application/json"},o&&(c.Authorization="Bearer ".concat(o)),l={method:t,headers:Object(y.a)({},c)},n&&(l.body=JSON.stringify(n)),e.abrupt("return",window.fetch("".concat(s).concat(r),l).then(function(){var e=Object(S.a)(C.a.mark((function e(t){var r,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==t.status){e.next=4;break}return b("scToken"),window.location.assign("/"),e.abrupt("return");case 4:if(!t.ok){e.next=11;break}return e.next=7,t.text();case 7:return r=e.sent,e.abrupt("return",""!==r?JSON.parse(r):null);case 11:if(404!==t.status){e.next=13;break}return e.abrupt("return",Promise.reject(g.NotFound));case 13:return e.next=15,t.text();case 15:return n=e.sent,e.abrupt("return",Promise.reject(n));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e.GET="GET",e.POST="POST",e.DELETE="DELETE",e.PATCH="PATCH"}(f||(f={})),function(e){e.NotFound='{"message":"Not Found"}'}(g||(g={}));var T=r(5);function E(e){var t=e.userConfig;if(0===(null===t||void 0===t?void 0:t.Protected.EditorFor.length))return null;var r=m.useState((function(e){return e.managing}));return Object(j.jsx)("div",{className:"Managing",children:Object(j.jsxs)("select",{className:"bg-gray-800 shadow rounded p-3",onChange:function(e){return m.update((function(t){t.managing=e.target.value}))},value:r,children:[null===t||void 0===t?void 0:t.Protected.EditorFor.map((function(e){return Object(j.jsx)("option",{value:e,children:e},e)})),Object(j.jsx)("option",{value:"",children:"you"})]})})}function B(e){var t=e.userConfig,r=e.setUserConfig;return Object(j.jsxs)("div",{className:"flex flex-row flex-wrap gap-4 ml-4",children:[Object(j.jsx)(E,{userConfig:t}),Object(j.jsx)(U,{setUserConfig:r,userConfig:t})]})}function U(e){var t=e.setUserConfig,r=e.userConfig,n=m.useState((function(e){return e.managing})),a={};null===r||void 0===r||r.Editors.map((function(e){return a["e"+(Object.values(a).length+1)]=e,e}));var s,c=Object(o.useState)(a),l=Object(O.a)(c,2),i=l[0],u=l[1],d=function(e,n){var a=Object(y.a)({},i);null===n?(delete a[e],u(a)):(a[e]=n,u(a)),t(Object(y.a)(Object(y.a)({},r),{},{Editors:Object.values(a)}))},b=[],p=Object(T.a)(Object.entries(i).sort());try{for(p.s();!(s=p.n()).done;){var x=Object(O.a)(s.value,2),h=x[0],f=x[1];b.push(Object(j.jsx)(I,{editor:f,id:h,onChange:d},h))}}catch(v){p.e(v)}finally{p.f()}var g=0===Object.values(i).filter((function(e){return 0===e.length})).length;return""!==n?null:Object(j.jsxs)(j.Fragment,{children:[b,g&&Object(j.jsx)("div",{className:"bg-green-700 rounded shadow p-3 cursor-pointer hover:bg-green-600",onClick:function(){var e=Object(y.a)({},i);e["e"+(Object.values(i).length+1)]="",u(e)},children:"add editor"})]})}function I(e){var t=e.id,r=e.editor,n=e.onChange,a=Object(o.useState)(r),s=Object(O.a)(a,2),c=s[0],l=s[1],i=Object(o.useRef)(null);return Object(j.jsxs)("div",{className:"flex items-center",children:[Object(j.jsx)("input",{className:"bg-blue-900 hover:bg-blue-800 focus:bg-blue:800 p-3 rounded shadow w-24 rounded-r-none truncate",spellCheck:!1,ref:i,type:"text",value:c,onKeyDown:function(e){return function(e){13===e.keyCode&&null!==i.current&&i.current.blur()}(e)},onChange:function(e){return l(e.target.value)},onBlur:function(){return n(t,c)}},r),Object(j.jsx)("span",{className:"bg-red-900 p-3 px-1 font-bold opacity-25 hover:opacity-100 cursor-pointer rounded rounded-l-none",onClick:function(){return n(t,null)},children:"X"})]})}var M,F=r(30);!function(e){e.Bttv="bttv"}(M||(M={}));var V={OwnerTwitchID:"",Type:M.Bttv,Title:"BetterTTV Emote",Cost:1e4,Prompt:"Add a BetterTTV emote! In the text field, send a link to the BetterTTV emote. powered by bitraft.gempir.com",BackgroundColor:"",IsMaxPerStreamEnabled:!1,MaxPerStream:0,IsUserInputRequired:!0,MaxPerUserPerStream:0,IsMaxPerUserPerStreamEnabled:!1,IsGlobalCooldownEnabled:!1,GlobalCooldownSeconds:0,ShouldRedemptionsSkipRequestQueue:!1,Enabled:!1};function D(e){var t,r=e.userConfig,n=Object(F.a)(),a=n.register,s=n.handleSubmit,c=n.formState.errors,l=n.setValue,i=function(e,t,r){var n=Object(o.useState)(r),a=Object(O.a)(n,2),s=a[0],c=a[1],l=function(){P(f.GET,"/api/reward/".concat(e,"/type/").concat(t)).then(c).catch((function(e){if(e!==g.NotFound)throw new Error(e);c(r)}))};return Object(o.useEffect)(l,[e,t,r]),[s,function(t){P(f.POST,"/api/reward/".concat(e),t).then(l)},function(){P(f.DELETE,"/api/reward/".concat(e,"/type/").concat(t),s).then(l)}]}(null===r||void 0===r?void 0:r.Protected.CurrentUserID,M.Bttv,V),u=Object(O.a)(i,3),d=u[0],b=u[1],m=u[2];return Object(o.useEffect)((function(){l("title",d.Title),l("prompt",d.Prompt),l("cost",d.Cost),l("backgroundColor",d.BackgroundColor),l("maxPerStream",d.MaxPerStream),l("maxPerUserPerStream",d.MaxPerUserPerStream),l("globalCooldownMinutes",d.GlobalCooldownSeconds/60),l("enabled",d.Enabled)}),[d,l]),Object(j.jsxs)("form",{onSubmit:s((function(e){var t={OwnerTwitchID:null===r||void 0===r?void 0:r.Protected.CurrentUserID,Type:M.Bttv,Title:e.title,Prompt:V.Prompt,Cost:Number(e.cost),BackgroundColor:e.backgroundColor,IsMaxPerStreamEnabled:Boolean(e.maxPerStream),MaxPerStream:Number(e.maxPerStream),IsUserInputRequired:!0,MaxPerUserPerStream:Number(e.maxPerUserPerStream),IsMaxPerUserPerStreamEnabled:Boolean(e.maxPerUserPerStream),IsGlobalCooldownEnabled:Boolean(e.globalCooldownMinutes),GlobalCooldownSeconds:60*Number(e.globalCooldownMinutes),ShouldRedemptionsSkipRequestQueue:!1,Enabled:e.enabled};b(t)})),className:"max-w-5xl m-4 p-4 bg-gray-800 rounded shadow",children:[Object(j.jsxs)("div",{className:"flex items-center justify-between",children:[Object(j.jsxs)("div",{className:"flex items-center gap-5",children:[Object(j.jsx)("img",{src:"/images/bttv.png",alt:"BetterTTV Logo",className:"w-16"}),Object(j.jsx)("h3",{className:"text-xl font-bold",children:"BetterTTV Emote"})]}),Object(j.jsx)("div",{className:"text-gray-600",children:(null===d||void 0===d?void 0:d.RewardID)&&Object(j.jsx)("div",{className:"bg-red-700 hover:bg-red-600 p-2 rounded shadow mt-3 text-gray-100 inline-block ml-3 cursor-pointer",onClick:m,children:"Delete"})})]}),Object(j.jsxs)("p",{className:"my-2 mb-4 text-gray-400",children:[Object(j.jsxs)("strong",{children:["Make sure ",Object(j.jsx)("span",{className:"text-green-600",children:"gempbot"})," is BetterTTV editor"]}),Object(j.jsx)("br",{}),"This will swap out 1 emote constantly. If the previous emote is not found it will use a free slot or remove a random emote."]}),Object(j.jsxs)("label",{className:"block",children:["Title",Object(j.jsx)("input",Object(y.a)(Object(y.a)({defaultValue:d.Title,spellCheck:!1},a("title",{required:!0})),{},{className:"form-input border-none bg-gray-700 mx-2 p-2 rounded shadow"})),c.title&&Object(j.jsx)("span",{className:"text-red-700",children:"required"})]}),Object(j.jsxs)("label",{className:"block mt-3",children:["Cost",Object(j.jsx)("input",Object(y.a)(Object(y.a)({defaultValue:d.Cost,type:"number",spellCheck:!1},a("cost",{required:!0})),{},{className:"form-input border-none bg-gray-700 mx-2 p-2 rounded shadow"})),c.cost&&Object(j.jsx)("span",{className:"text-red-700",children:"required"})]}),Object(j.jsxs)("label",{className:"block mt-3",children:["Prompt",Object(j.jsx)("input",Object(y.a)(Object(y.a)({defaultValue:d.Prompt,spellCheck:!1,disabled:!0},a("prompt")),{},{className:"block cursor-not-allowed truncate form-input w-full opacity-25 border-none bg-gray-700 mt-2 p-2 rounded shadow"}))]}),Object(j.jsxs)("label",{className:"block mt-3",children:["Background Color",Object(j.jsx)("input",Object(y.a)(Object(y.a)({defaultValue:d.BackgroundColor,placeholder:"#FFFFFF",pattern:"^#+([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$",spellCheck:!1},a("backgroundColor")),{},{className:"form-input border-none bg-gray-700 mx-2 p-2 rounded shadow"}))]}),Object(j.jsxs)("div",{className:"mt-8 font-bold",children:["Limits ",Object(j.jsx)("span",{className:"text-gray-500",children:"(0 = unlimited)"})]}),Object(j.jsxs)("label",{className:"flex items-center mt-3",children:["Max per Stream",Object(j.jsx)("input",Object(y.a)(Object(y.a)({defaultValue:d.MaxPerStream,placeholder:"0",type:"number",spellCheck:!1},a("maxPerStream")),{},{className:"form-input border-none bg-gray-700 mx-2 p-2 rounded shadow"}))]}),Object(j.jsxs)("label",{className:"flex items-center mt-3",children:["Max per User per Stream",Object(j.jsx)("input",Object(y.a)(Object(y.a)({defaultValue:d.MaxPerUserPerStream,placeholder:"0",type:"number",spellCheck:!1},a("maxPerUserPerStream")),{},{className:"form-input border-none bg-gray-700 mx-2 p-2 rounded shadow"}))]}),Object(j.jsxs)("label",{className:"flex items-center mt-3",children:["Global Cooldown in Minutes",Object(j.jsx)("input",Object(y.a)(Object(y.a)({defaultValue:(null!==(t=d.GlobalCooldownSeconds)&&void 0!==t?t:0)/60,placeholder:"0",type:"number",spellCheck:!1},a("globalCooldownMinutes")),{},{className:"form-input border-none bg-gray-700 mx-2 p-2 rounded shadow"}))]}),Object(j.jsxs)("div",{className:"flex flex-row justify-between items-center select-none",children:[Object(j.jsxs)("label",{className:"flex items-center",children:[Object(j.jsx)("input",Object(y.a)(Object(y.a)({defaultChecked:d.Enabled,type:"checkbox"},a("enabled")),{},{className:"form-checkbox rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-offset-0 focus:ring-indigo-200 focus:ring-opacity-50"})),Object(j.jsx)("span",{className:"ml-2",children:"Enabled"})]}),Object(j.jsx)("input",{type:"submit",className:"bg-green-700 hover:bg-green-600 p-2 rounded shadow block mt-3 cursor-pointer",value:"save"})]})]})}function G(){Object(v.a)("bitraft - Dashboard");var e=function(){var e=Object(o.useState)(void 0),t=Object(O.a)(e,2),r=t[0],n=t[1],a=Object(o.useState)(0),s=Object(O.a)(a,2),c=s[0],l=s[1],i=m.useState((function(e){return e.managing})),u=function(){var e="/api/userConfig";i&&(e+="?managing=".concat(i)),P(f.GET,e).then((function(e){return n(e)}))};return Object(o.useEffect)(u,[i]),Object(w.a)((function(){if(c&&r){var e="/api/userConfig";i&&(e+="?managing=".concat(i)),P(f.POST,e,r).then(u)}else c&&null===r&&P(f.DELETE,"/api/userConfig")}),500,[c]),[r,function(e){n(e),l(c+1)},u]}(),t=Object(O.a)(e,2),r=t[0],n=t[1];return r?Object(j.jsxs)("div",{children:[Object(j.jsx)(B,{userConfig:r,setUserConfig:n}),Object(j.jsx)(D,{userConfig:r})]}):null}function R(){var e=m.useState((function(e){return{apiBaseUrl:e.apiBaseUrl,twitchClientId:e.twitchClientId}})),t=d(e.apiBaseUrl,e.twitchClientId);return Object(j.jsx)("section",{className:"text-gray-600 body-font",children:Object(j.jsxs)("div",{className:"container px-5 py-24 mx-auto",children:[Object(j.jsxs)("div",{className:"flex flex-col text-center w-full mb-20",children:[Object(j.jsx)("h2",{className:"text-xs text-indigo-400 tracking-widest font-medium title-font mb-1",children:"bitraft"}),Object(j.jsx)("h1",{className:"sm:text-3xl text-2xl font-medium title-font mb-4 text-gray-100",children:"Channel Point Rewards"}),Object(j.jsx)("p",{className:"lg:w-2/3 mx-auto leading-relaxed text-base",children:"Offer your viewers special channel point rewards"})]}),Object(j.jsx)("div",{className:"flex flex-wrap",children:Object(j.jsxs)("div",{className:"xl:w-1/4 lg:w-1/2 md:w-full px-8 py-6 border-l-2 border-gray-200 border-opacity-60",children:[Object(j.jsx)("h2",{className:"text-lg sm:text-xl text-gray-100 font-medium title-font mb-2",children:"BetterTTV Emotes"}),Object(j.jsx)("p",{className:"leading-relaxed text-base mb-4 text-gray-400",children:"Allow viewers to add new BetterTTV emotes to your chat"})]})}),Object(j.jsx)("div",{className:"flex justify-center",children:Object(j.jsx)("a",{className:"m-auto mx-auto mt-16 text-white bg-purple-800 hover:bg-purple-600 border-0 py-2 px-8 focus:outline-none rounded text-lg",href:t.toString(),children:"Login to Get Started"})})]})})}function q(){return Object(v.a)("bitraft"),Object(j.jsx)("div",{children:Object(j.jsx)(R,{})})}function L(){return Object(j.jsxs)(i.a,{children:[Object(j.jsx)(p,{}),Object(j.jsxs)(u.c,{children:[Object(j.jsx)(u.a,{path:"/dashboard",children:Object(j.jsx)(G,{})}),Object(j.jsx)(u.a,{path:"/",children:Object(j.jsx)(q,{})})]})]})}r(46);l.a.render(Object(j.jsx)(o.StrictMode,{children:Object(j.jsx)(L,{})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.4e292e31.chunk.js.map