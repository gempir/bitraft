(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{49:function(n,e,t){"use strict";t.r(e);var r,i,a,o=t(3),c=t(0),s=t.n(c),d=t(29),l=t.n(d),u=t(4),b=t(2),g=t(22),h=t(5),p=t(8),j=t.n(p),m=t(7),v=t(13);function f(n){!function(n,e,t){var r=new Date;r.setTime(r.getTime()+864e5*t),document.cookie=n+"="+e+";path=/;expires="+r.toUTCString()}(n,"",-1)}var x,O=new(t(33).a)({twitchClientId:null!==(r="il5oqz0li81219qvw2hs7umntr493e")?r:"",apiBaseUrl:null!==(i="https://spamchamp-api.gempir.com")?i:"",baseUrl:null!==(a="https://spamchamp.gempir.com")?a:"",scToken:function(n){var e=document.cookie.match("(^|;) ?"+n+"=([^;]*)(;|$)");return e?e[2]:null}("scToken"),managing:""});function w(n,e){return k.apply(this,arguments)}function k(){return(k=Object(v.a)(j.a.mark((function n(e,t){var r,i,a,o,c,s,d=arguments;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=d.length>2&&void 0!==d[2]?d[2]:void 0,i=O.getRawState(),a=i.apiBaseUrl,o=i.scToken,c={"content-type":"application/json"},o&&(c.Authorization="Bearer ".concat(o)),s={method:e,headers:Object(m.a)({},c)},r&&(s.body=JSON.stringify(r)),n.abrupt("return",window.fetch("".concat(a).concat(t),s).then(function(){var n=Object(v.a)(j.a.mark((function n(e){var t;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(401!==e.status){n.next=4;break}return f("scToken"),window.location.assign("/"),n.abrupt("return");case 4:if(!e.ok){n.next=10;break}return n.next=7,e.json();case 7:return n.abrupt("return",n.sent);case 10:return n.next=12,e.text();case 12:return t=n.sent,n.abrupt("return",Promise.reject(new Error(t)));case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()));case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(n){n.GET="GET",n.POST="POST",n.DELETE="POST"}(x||(x={}));var y=t(51);var C,S,T=t(9),E=t(1),N=u.b.div(C||(C=Object(o.a)(['\n    position: relative;\n\n    select {\n        -moz-appearance: none;\n        -webkit-appearance: none;\n        appearance: none;\n        background: var(--bg-bright);\n        border: 1px solid var(--bg-brighter);\n        color: white;\n        outline: none;\n        padding: 1rem;\n        padding-right: 1.5rem;\n        font-size: 0.8rem;\n        line-height: 1.1rem;\n        position: relative;\n        height: 50px;\n    }\n\n    &:after {\n        content: "\u25bc";\n        color: white;\n        pointer-events: none;\n        position: absolute;\n        right: 10px;\n        top: 20px;\n        margin: auto;\n    }\n'])));function P(n){var e=n.userConfig;if(0===(null===e||void 0===e?void 0:e.Protected.EditorFor.length))return null;var t=O.useState((function(n){return n.managing}));return Object(E.jsx)(N,{children:Object(E.jsxs)("select",{onChange:function(n){return O.update((function(e){e.managing=n.target.value}))},value:t,defaultValue:"",children:[null===e||void 0===e?void 0:e.Protected.EditorFor.map((function(n){return Object(E.jsx)("option",{value:n,children:n},n)})),Object(E.jsx)("option",{value:"",children:"you"})]})})}var U,B,R=u.b.div(S||(S=Object(o.a)(["\n    display: block;\n    color: white;\n    padding: 1rem 1rem;\n    text-decoration: none;\n    font-weight: bold;\n    border-radius: 3px;\n    background: var(--danger-dark);\n    cursor: pointer;\n    opacity: 0.25;\n    transition: opacity 0.2s ease-in-out;\n\n    &:hover {\n        background: var(--danger);\n        opacity: 1;\n    }\n"])));function z(n){var e=n.setUserConfig;return""!==O.useState((function(n){return n.managing}))?null:Object(E.jsx)(R,{onClick:function(){window.confirm("Do you really want to reset?\n- Channel Point Rewards on Twitch from spamchamp\n- Settings on spamchamp.gempir.com\n- Unsubscribes all webhooks for your channel")&&e(null)},children:"Reset"})}var J=u.b.div(U||(U=Object(o.a)(["\n    display: inline-grid;\n    grid-auto-flow: column;\n    position: absolute;\n    top: 1rem;\n    left: 1rem;\n    border-radius: 3px;\n    cursor: pointer;\n    grid-gap: 0.5rem;\n"])));function F(n){var e=n.userConfig,t=n.setUserConfig;return Object(E.jsxs)(J,{children:[Object(E.jsx)(P,{userConfig:e}),Object(E.jsx)(z,{setUserConfig:t}),Object(E.jsx)(A,{setUserConfig:t,userConfig:e})]})}var L,_,D=u.b.div(B||(B=Object(o.a)(["\n    display: inline-grid;\n    grid-auto-flow: column;\n    grid-gap: 0.5rem;\n\n    .editor-input {\n        background: var(--bg-bright);\n        border: 1px solid var(--bg-brighter);\n        color: white;\n        outline: none;\n        padding-right: 0.5rem;\n        font-size: 0.8rem;\n        line-height: 1.2rem;\n        position: relative;\n        height: 50px;\n\n        input {\n            outline: none;\n            max-width: 6rem;\n            padding: 1rem;\n            padding-right: 0;\n            background: transparent;\n            border: 0;\n            color: white;\n        }\n\n        span {\n            padding: 0.5rem;\n            font-weight: bold;\n            user-select: none;\n\n            &:hover {\n                color: var(--danger);\n            }\n        }\n    }\n\n    .add-editor {\n        height: 50px;\n        padding: 1rem;\n        font-size: 0.8rem;\n        background: var(--theme-bright);\n        border-radius: 3px;\n        opacity: 1;\n        font-weight: bold;\n        line-height: 1.2rem;\n        transition: opacity 0.2s ease-in-out;\n        user-select: none;\n\n        &:hover {\n            opacity: 1;\n        }\n    }\n"])));function A(n){var e=n.setUserConfig,t=n.userConfig,r=O.useState((function(n){return n.managing})),i={};null===t||void 0===t||t.Editors.map((function(n){return i["e"+(Object.values(i).length+1)]=n,n}));var a,o=Object(c.useState)(i),s=Object(b.a)(o,2),d=s[0],l=s[1],u=function(n,r){var i=Object(m.a)({},d);null===r?(delete i[n],l(i)):(i[n]=r,l(i)),e(Object(m.a)(Object(m.a)({},t),{},{Editors:Object.values(i)}))},g=[],h=Object(T.a)(Object.entries(d).sort());try{for(h.s();!(a=h.n()).done;){var p=Object(b.a)(a.value,2),j=p[0],v=p[1];g.push(Object(E.jsx)(I,{editor:v,id:j,onChange:u},j))}}catch(x){h.e(x)}finally{h.f()}var f=0===Object.values(d).filter((function(n){return 0===n.length})).length;return""!==r?null:Object(E.jsxs)(D,{children:[g,f&&Object(E.jsx)("div",{className:"add-editor",onClick:function(){var n=Object(m.a)({},d);n["e"+(Object.values(d).length+1)]="",l(n)},children:"add editor"})]})}function I(n){var e=n.id,t=n.editor,r=n.onChange,i=Object(c.useState)(t),a=Object(b.a)(i,2),o=a[0],s=a[1],d=Object(c.useRef)(null);return Object(E.jsxs)("div",{className:"editor-input",children:[Object(E.jsx)("input",{ref:d,type:"text",value:o,onKeyDown:function(n){return function(n){13===n.keyCode&&null!==d.current&&d.current.blur()}(n)},onChange:function(n){return s(n.target.value)},onBlur:function(){return r(e,o)}},t),Object(E.jsx)("span",{onClick:function(){return r(e,null)},children:"X"})]})}var G,X=u.b.div(L||(L=Object(o.a)(["\n    display: grid;\n    grid-gap: 1rem;\n"]))),M=u.b.div(_||(_=Object(o.a)(["\n    background: var(--bg-bright);\n    border: 1px solid var(--bg-brighter);\n    padding: 0.5rem;\n\n    .container {\n        display: grid;\n        grid-template-columns: 56px 1fr;\n        grid-gap: 1rem;\n    }\n"])));function q(n){var e=n.rewards;return Object(E.jsx)(X,{children:e.map((function(n){var e,t;return Object(E.jsx)(M,{children:Object(E.jsxs)("div",{className:"container",children:[Object(E.jsx)("img",{src:null!==(e=null===(t=n.image)||void 0===t?void 0:t.url_2x)&&void 0!==e?e:n.default_image.url_2x,alt:n.title}),Object(E.jsxs)("div",{children:[Object(E.jsx)("h5",{children:n.title}),Object(E.jsx)("p",{children:n.prompt})]})]})},n.id)}))})}function H(){var n=Object(c.useState)(["userConfig"]),e=Object(b.a)(n,2),t=e[0],r=e[1],i=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},t=Object(c.useState)(void 0),r=Object(b.a)(t,2),i=r[0],a=r[1],o=Object(c.useState)(0),s=Object(b.a)(o,2),d=s[0],l=s[1],u=O.useState((function(n){return n.managing})),g=function(){var n="/api/userConfig";u&&(n+="?managing=".concat(u)),w(x.GET,n).then((function(n){return a(n)})).catch(e)};return Object(c.useEffect)(g,[u]),Object(y.a)((function(){if(d&&i){var t="/api/userConfig";u&&(t+="?managing=".concat(u)),w(x.POST,t,i).then(n).catch(e)}else d&&null===i&&w(x.DELETE,"/api/userConfig").then(g).catch(e)}),500,[d]),[i,function(n){a(n),l(d+1)}]}((function(){var n=t.slice();n.push("saved"),r(n),setTimeout((function(){r(["userConfig"])}),500)}),(function(){var n=t.slice();n.push("error"),r(n),setTimeout((function(){r(["userConfig"])}),500)})),a=Object(b.a)(i,2),o=a[0],s=a[1],d=function(){var n=Object(c.useState)([]),e=Object(b.a)(n,2),t=e[0],r=e[1],i=O.useState((function(n){return n.managing}));return Object(c.useEffect)((function(){var n="/api/rewards";i&&(n+="?managing=".concat(i)),w(x.GET,n).then((function(n){var e;return r(null!==(e=n.data)&&void 0!==e?e:[])}))}),[i]),[t]}(),l=Object(b.a)(d,1)[0];return Object(E.jsxs)(Q,{children:[o&&Object(E.jsx)(F,{userConfig:o,setUserConfig:s}),Object(E.jsx)("div",{className:t.join(" "),children:o&&Object(E.jsxs)("div",{className:"redemption",children:[Object(E.jsx)("img",{src:"/images/bttv.png",alt:"bttv"}),Object(E.jsxs)("label",{className:"switch",children:[Object(E.jsx)("input",{type:"checkbox",checked:o.Redemptions.Bttv.Active,onChange:function(n){var e=JSON.parse(JSON.stringify(o));e.Redemptions.Bttv.Active=n.target.checked,s(e)}}),Object(E.jsx)("span",{className:"slider round"})]}),Object(E.jsxs)("div",{className:"redemption-title",children:[Object(E.jsx)("span",{children:"Channel Points Reward Name"}),Object(E.jsx)("input",{type:"text",value:o.Redemptions.Bttv.Title,spellCheck:!1,onChange:function(n){var e=JSON.parse(JSON.stringify(o));e.Redemptions.Bttv.Title=n.target.value,s(e)}})]}),Object(E.jsxs)("span",{className:"hint",children:["make sure ",Object(E.jsx)("strong",{children:"gempbot"})," is bttv editor"]})]})}),Object(E.jsx)(q,{rewards:l})]})}var K,V,W,$,Q=u.b.div(G||(G=Object(o.a)(['\n    margin-top: 5rem;\n    margin-left: 1rem;\n    margin-right: 1rem;\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: 2rem;\n\n    .userConfig {\n        padding-bottom: 2rem;\n        background: var(--bg);\n        transition: background-color ease-in-out 0.2s;\n\n        &.saved {\n            background: var(--theme);\n        }\n\n        &.error {\n            background: var(--danger);\n        }\n    }\n\n    .redemption {\n        display: flex;\n        align-items: center;\n        background: var(--bg-bright);\n        border: 1px solid var(--bg-brighter);\n        padding: 0.5rem;\n\n        img {\n            max-height: 3rem;\n            margin-left: 1rem;\n            margin-right: 2rem;\n        }\n\n        .redemption-title {\n            position: relative;\n\n            span {\n                position: absolute;\n                top: -13px;\n                left: 18px;\n                font-size: 11px;\n            }\n\n            input {\n                margin: 0;\n                padding: 0;\n                margin-left: 1rem;\n                font-size: 1rem;\n                background: var(--bg);\n                border: 1px solid var(--bg-bright);\n                padding: 5px;\n                color: white;\n\n                &:focus {\n                    outline: none;\n                    border: 1px solid var(--theme2);\n                }\n            }\n        }\n        \n        .hint {\n            margin-left: 1rem;\n\n            strong {\n                color: var(--theme-bright);\n            }\n        }\n    }\n\n    /* The switch - the box around the slider */\n    .switch {\n        position: relative;\n        display: inline-block;\n        width: 60px;\n        height: 34px;\n\n        input {\n            opacity: 0;\n            width: 0;\n            height: 0;\n        }\n    }\n    /* The slider */\n    .slider {\n        position: absolute;\n        cursor: pointer;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background-color: #ccc;\n        -webkit-transition: .4s;\n        transition: .4s;\n\n        &:before {\n            position: absolute;\n            content: "";\n            height: 26px;\n            width: 26px;\n            left: 4px;\n            bottom: 4px;\n            background-color: white;\n            -webkit-transition: .4s;\n            transition: .4s;\n        }\n    }\n\n    input:checked + .slider {\n        background-color: var(--theme-bright);\n    }\n\n    input:focus + .slider {\n     box-shadow: 0 0 1px var(--theme-bright);\n    }\n\n    input:checked + .slider:before {\n        -webkit-transform: translateX(26px);\n        -ms-transform: translateX(26px);\n        transform: translateX(26px);\n    }\n\n    .slider.round {\n        border-radius: 34px;\n\n        &:before {\n            border-radius: 50%;\n        }\n    }\n']))),Y=u.b.a(K||(K=Object(o.a)(["\n    position: absolute;\n    display: block;\n    color: white;\n    top: 1rem;\n    right: 1rem;\n    padding: 1rem 2rem;\n    text-decoration: none;\n    font-weight: bold;\n    border-radius: 3px;\n    background: var(--twitch);\n\n    &:hover {\n        background: var(--twitch-dark);\n    }\n"])));function Z(){return O.useState((function(n){return n.scToken}))?Object(E.jsx)(an,{}):Object(E.jsx)(Y,{href:on().toString(),children:"Login"})}var nn,en=u.b.div(V||(V=Object(o.a)(["\n    position: absolute;\n    top: 1rem;\n    right: 1rem;\n    display: flex;\n\n    a {\n        text-decoration: none;\n    }\n"]))),tn=u.b.a(W||(W=Object(o.a)(["\n    display: block;\n    color: white;\n    width: 150px;\n    padding: 1rem 2rem;\n    text-decoration: none;\n    font-weight: bold;\n    border-radius: 3px;\n    background: var(--twitch);\n    cursor: pointer;\n\n    &:hover {\n        background: var(--twitch-dark);\n    }\n"]))),rn=u.b.div($||($=Object(o.a)(["\n    display: block;\n    color: white;\n    margin-right: 1rem;\n    padding: 1rem 2rem;\n    text-decoration: none;\n    font-weight: bold;\n    border-radius: 3px;\n    background: var(--theme2-dark);\n    cursor: pointer;\n\n    &.dashboard {\n        background: var(--theme);\n\n        &:hover {\n        background: var(--theme-bright);\n    }\n    }\n\n    &:hover {\n        background: var(--theme2);\n    }\n"])));function an(){var n=Object(c.useState)("Logged In"),e=Object(b.a)(n,2),t=e[0],r=e[1];return Object(E.jsxs)(en,{children:[Object(E.jsx)(g.b,{to:"/",children:Object(E.jsx)(rn,{children:"Home"})}),Object(E.jsx)(g.b,{to:"/dashboard",children:Object(E.jsx)(rn,{className:"dashboard",children:"Dashboard"})}),Object(E.jsx)(tn,{href:on().toString(),onMouseEnter:function(){return r("force login")},onMouseLeave:function(){return r("Logged In")},children:t})]})}function on(){var n=O.getRawState(),e=n.apiBaseUrl,t=n.twitchClientId,r=new URL("https://id.twitch.tv/oauth2/authorize");return r.searchParams.set("client_id",t),r.searchParams.set("redirect_uri",e+"/api/callback"),r.searchParams.set("response_type","code"),r.searchParams.set("scope","channel:read:redemptions channel:manage:redemptions"),r}var cn,sn,dn=u.b.div(nn||(nn=Object(o.a)(["\n    display: inline-block;\n    background: var(--bg-bright);\n    border: 1px solid var(--bg-brighter);\n    padding: 0.5rem;\n    margin: 1rem;\n    margin-right: 0;\n    margin-bottom: 0;\n"])));function ln(n){var e=n.activeChannels,t=n.joinedChannels;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(dn,{children:["Joined Channels: ",Object(E.jsx)("strong",{children:t})]}),Object(E.jsxs)(dn,{children:["Active Channels: ",Object(E.jsx)("strong",{children:e})]})]})}function un(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{src:"https://static-cdn.jtvnw.net/user-default-pictures-uv/cdd517fe-def4-11e9-948e-784f43822e80-profile_image-70x70.png"},e=n.src;return Object(E.jsx)("img",{src:e,width:"30",height:"30",alt:"profile"})}var bn=u.b.div(cn||(cn=Object(o.a)(["\n    display: flex;\n"])));function gn(n){var e=n.records;return Object(E.jsx)(bn,{children:e.map((function(n){return Object(E.jsx)(pn,{record:n},n.title)}))})}var hn=u.b.div(sn||(sn=Object(o.a)(["\n    background: var(--bg-bright);\n    border: 1px solid var(--bg-brighter);\n    margin: 1rem;\n    margin-right: 0;\n    padding: 1rem;\n\n    h2 {\n        color: var(--text);\n        margin: 0;\n        margin-bottom: 1rem;\n        padding: 0;\n    }\n\n    ol {\n        color: white;\n        font-size: 1.5rem;\n        font-weight: bold;\n        width: 500px;\n        padding: 0;\n        margin: 0;\n        margin-right: 15px;\n        background: var(--lightBackground);\n        border: 1px solid var(--lightBorder);\n        border-radius: 3px;\n\n        li {\n            display: flex;\n            align-items: center;\n            margin-bottom: 0.25rem;\n\n            img {\n                margin-right: 10px;\n            }\n\n            .value {\n                text-align: right;\n                flex: 1 1 auto;\n            }\n        }\n    }\n"])));function pn(n){var e=n.record;return Object(E.jsxs)(hn,{children:[Object(E.jsx)("h2",{children:e.title}),Object(E.jsx)("ol",{children:e.scores.map((function(n){return Object(E.jsxs)("li",{children:[Object(E.jsx)(un,{src:n.user.profilePicture}),Object(E.jsx)("span",{children:n.user.displayName}),Object(E.jsx)("span",{className:"value",children:n.score})]},n.user.id)}))})]})}var jn,mn,vn=t(14),fn=function n(e){Object(vn.a)(this,n);var t=O.getRawState().apiBaseUrl;!function n(){var r=new WebSocket("".concat(t.replace("https://","wss://").replace("http://","ws://"),"/api/ws"));r.onmessage=function(n){e(JSON.parse(n.data))},r.onclose=function(e){console.log("Socket is closed. Reconnect will be attempted in 1 second.",e.reason),setTimeout(n,1e3)},r.onerror=function(n){console.error("Socket encountered error: ",n,"Closing socket"),r.close()}}()},xn=u.b.main(jn||(jn=Object(o.a)([""])));function On(){var n=Object(c.useState)(0),e=Object(b.a)(n,2),t=e[0],r=e[1],i=Object(c.useState)(0),a=Object(b.a)(i,2),o=a[0],s=a[1],d=Object(c.useState)([]),l=Object(b.a)(d,2),u=l[0],p=l[1];return Object(c.useEffect)((function(){new fn((function(n){r(n.joinedChannels),s(n.activeChannels),p(n.records)}))}),[]),Object(E.jsx)(xn,{children:Object(E.jsxs)(g.a,{children:[Object(E.jsx)(Z,{}),Object(E.jsxs)(h.c,{children:[Object(E.jsx)(h.a,{path:"/dashboard",children:Object(E.jsx)(H,{})}),Object(E.jsxs)(h.a,{path:"/",children:[Object(E.jsx)(ln,{activeChannels:o,joinedChannels:t}),Object(E.jsx)(gn,{records:u})]})]})]})})}var wn=Object(u.a)(mn||(mn=Object(o.a)(["\n    body {\n        --bg: #0e0e10;\n        --bg-bright: #18181b;\n        --bg-brighter: #3d4146;\n        --bg-dark: #121416;\n        --theme: #009148;\n        --theme-bright: #00a552;\n        --theme2: #2980b9;\n        --theme2-bright: #3498db;\n        --theme2-dark: #24618a;\n        --text: #F5F5F5;\n        --text-dark: #616161;\n        --twitch: #6441a5;\n        --twitch-dark: #4c317e;\n        --danger: #e74c3c;\n        --danger-dark: #c0392b;\n\n        background: var(--bg);\n        margin: 0;\n        padding: 0;\n        color: var(--text);\n        margin: 0;\n        font-family: Helvetica, Arial, sans-serif;\n        height: 100%;\n        width: 100%;\n\n        * {\n            box-sizing: border-box;\n        }\n    }\n"])));l.a.render(Object(E.jsx)(c.StrictMode,{children:Object(E.jsxs)(s.a.Fragment,{children:[Object(E.jsx)(wn,{}),Object(E.jsx)(On,{})]})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.78a27546.chunk.js.map