{"version":3,"sources":["service/cookie.ts","store.tsx","components/Navbar.tsx","service/doFetch.ts","components/Managing.tsx","components/Reset.tsx","components/Menu.tsx","components/RewardForms/BttvForm.tsx","components/Routes/Dashboard.tsx","hooks/useUserConfig.ts","service/EventService.ts","components/Meta.tsx","components/ProfilePicture.tsx","components/Records.tsx","components/Routes/Home.tsx","App.tsx","index.tsx"],"names":["deleteCookie","name","value","days","d","Date","setTime","getTime","document","cookie","toUTCString","setCookie","store","PStore","twitchClientId","process","apiBaseUrl","baseUrl","scToken","v","match","getCookie","managing","Navbar","useState","s","buttons","Login","className","LoggedIn","to","getRawState","url","URL","searchParams","set","href","toString","Method","doFetch","method","path","a","body","undefined","headers","Authorization","config","JSON","stringify","window","fetch","then","response","status","location","assign","ok","json","text","errorMessage","Promise","reject","Error","Managing","userConfig","Protected","EditorFor","length","onChange","e","update","target","map","editorFor","Reset","setUserConfig","onClick","confirm","Menu","EditorManager","loadedEditors","Editors","editor","Object","values","editors","setEditors","changeEditor","id","newEditors","editorInputs","entries","sort","key","push","EditorInput","creatingNewEditor","filter","setValue","ref","useRef","spellCheck","type","onKeyDown","keyCode","current","blur","handleKeyPress","onBlur","BttvForm","useForm","register","handleSubmit","errors","formState","onSubmit","data","Rewards","Bttv","isDefault","cost","Number","maxPerStream","maxPerUserPerStream","globalCooldownSeconds","globalCooldownMinutes","src","alt","ID","defaultValue","title","required","prompt","disabled","backgroundColor","placeholder","defaultChecked","enabled","Dashboard","renderKey","setRenderKey","onSave","onError","onUserConfigChange","changeCounter","setChangeCounter","fetchConfig","endPoint","GET","catch","useEffect","useDebounce","POST","DELETE","useUserConfig","userCfg","EventService","callback","connect","ws","WebSocket","replace","onmessage","event","parse","onclose","console","log","reason","setTimeout","onerror","err","error","close","Meta","activeChannels","joinedChannels","ProfilePicture","width","height","Records","records","record","RecordComponent","scores","score","user","profilePicture","displayName","Home","setJoinedChannels","setActiveChannels","setRecords","message","App","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.bf0f83da.chunk.js","sourcesContent":["export function getCookie(name: string): string | null {\n    const v = document.cookie.match('(^|;) ?' + name + '=([^;]*)(;|$)');\n    return v ? v[2] : null;\n}\n\nexport function setCookie(name: string, value: string, days: number) {\n    const d = new Date();\n    d.setTime(d.getTime() + 24 * 60 * 60 * 1000 * days);\n    document.cookie = name + \"=\" + value + \";path=/;expires=\" + d.toUTCString();\n}\n\nexport function deleteCookie(name: string) {\n    setCookie(name, '', -1);\n}\n","import { Store as PStore } from \"pullstate\";\nimport { getCookie } from \"./service/cookie\";\n\nexport interface Store {\n    twitchClientId: string,\n    baseUrl: string,\n    apiBaseUrl: string,\n    scToken: string | null,\n    managing: string,\n}\n\nexport const store = new PStore<Store>({\n    twitchClientId: process.env.REACT_APP_TWITCH_CLIENT_ID ?? \"\",\n    apiBaseUrl: process.env.REACT_APP_API_BASE_URL ?? \"\",\n    baseUrl: process.env.REACT_APP_BASE_URL ?? \"\",\n    scToken: getCookie(\"scToken\"),\n    managing: \"\",\n});","import { Link } from \"react-router-dom\";\nimport { store } from \"../store\";\n\n\nexport function Navbar() {\n    const scToken = store.useState(s => s.scToken);\n\n    let buttons = <Login className=\"p-4 rounded shadow bg-purple-800 hover:bg-purple-600\" />\n\n    if (scToken) {\n        buttons = <LoggedIn />;\n    }\n\n    return <div className=\"m-4 flex flex-row justify-end gap-4\">\n        {buttons}\n    </div>;\n}\n\nfunction LoggedIn() {\n    return <>\n        <Link to=\"/\" className=\"p-4 rounded shadow bg-gray-800 hover:bg-gray-700\">\n            Home\n        </Link>\n        <Link to=\"/dashboard\" className=\"p-4 rounded shadow bg-blue-900 hover:bg-blue-800\">\n            Dashboard\n        </Link>\n        <Login className={`p-4 rounded shadow opacity-25 bg-purple-800 hover:bg-purple-600`}/>\n    </>;\n}\n\nfunction Login({ className }: { className?: string }) {\n    const { apiBaseUrl, twitchClientId } = store.getRawState();\n\n    const url = new URL(\"https://id.twitch.tv/oauth2/authorize\")\n    url.searchParams.set(\"client_id\", twitchClientId);\n    url.searchParams.set(\"redirect_uri\", apiBaseUrl + \"/api/callback\");\n    url.searchParams.set(\"response_type\", \"code\");\n    url.searchParams.set(\"scope\", \"channel:read:redemptions channel:manage:redemptions\");\n\n\n    return <a className={className} href={url.toString()}>Login</a>\n}","import { store } from \"../store\";\nimport { deleteCookie } from \"./cookie\";\n\nexport enum Method {\n    GET = \"GET\",\n    POST = \"POST\",\n    DELETE = \"POST\"\n}\n\nexport async function doFetch(method: Method, path: string, body: any = undefined) {\n    const {apiBaseUrl, scToken} = store.getRawState();\n\n    const headers: Record<string, string> = { 'content-type': 'application/json' }\n    if (scToken) {\n        headers.Authorization = `Bearer ${scToken}`\n    }\n\n    const config: RequestInit = {\n        method: method,\n        headers: {\n            ...headers,\n        },\n    }\n\n    if (body) {\n        config.body = JSON.stringify(body)\n    }\n\n    return window.fetch(`${apiBaseUrl}${path}`, config)\n        .then(async response => {\n            if (response.status === 401) {\n                deleteCookie(\"scToken\");\n                window.location.assign(\"/\")\n                return\n            }\n            if (response.ok) {\n                return await response.json()\n            } else {\n                const errorMessage = await response.text()\n                return Promise.reject(new Error(errorMessage))\n            }\n        })\n}","import { UserConfig } from \"../hooks/useUserConfig\";\nimport { store } from \"../store\";\n\nexport function Managing({ userConfig }: { userConfig: UserConfig | null | undefined }) {\n    if (userConfig?.Protected.EditorFor.length === 0) {\n        return null;\n    }\n    const managing = store.useState(s => s.managing);\n\n    return <div className=\"Managing\">\n        <select className=\"bg-gray-800 shadow rounded p-3\" onChange={e => store.update(s => { s.managing = e.target.value })} value={managing}>\n            {userConfig?.Protected.EditorFor.map(editorFor => <option key={editorFor} value={editorFor}>{editorFor}</option>)}\n            <option value=\"\">you</option>\n        </select>\n    </div>\n}","import { UserConfig } from \"../hooks/useUserConfig\";\nimport { store } from \"../store\";\n\n\nexport function Reset({ setUserConfig }: { setUserConfig: (userConfig: UserConfig | null) => void }) {\n    const managing = store.useState(s => s.managing);\n    if (managing !== \"\") {\n        return null;\n    }\n\n    return <div className=\"p-3 opacity-25 hover:opacity-100 bg-red-900 hover:bg-red-800 shadow rounded cursor-pointer\" onClick={() => {\n        if (window.confirm(`Do you really want to reset?\\n- Channel Point Rewards on Twitch from spamchamp\\n- Settings on spamchamp.gempir.com\\n- Unsubscribes all webhooks for your channel`)) {\n            setUserConfig(null);\n        }\n    }}>Reset</div>;\n}","import React, { KeyboardEvent, useRef, useState } from \"react\";\nimport { SetUserConfig, UserConfig } from \"../hooks/useUserConfig\";\nimport { store } from \"../store\";\nimport { Managing } from \"./Managing\";\nimport { Reset } from \"./Reset\";\n\nexport function Menu({ userConfig, setUserConfig }: { userConfig: UserConfig | null | undefined, setUserConfig: SetUserConfig }) {\n    return <div className=\"flex flex-row flex-wrap gap-4 ml-4\">\n        <Managing userConfig={userConfig} />\n        <Reset setUserConfig={setUserConfig} />\n        <EditorManager setUserConfig={setUserConfig} userConfig={userConfig} />\n    </div>\n}\n\nfunction EditorManager({ setUserConfig, userConfig }: { setUserConfig: SetUserConfig, userConfig: UserConfig | null | undefined }) {\n    const managing = store.useState(s => s.managing);\n    \n    const loadedEditors: Record<string, string> = {};\n    userConfig?.Editors.map(editor => {\n        loadedEditors[\"e\" + (Object.values(loadedEditors).length + 1)] = editor\n        return editor;\n    });\n\n    const [editors, setEditors] = useState<Record<string, string>>(loadedEditors);\n\n    const changeEditor = (id: string, value: string | null) => {\n        const newEditors = { ...editors };\n\n        if (value === null) {\n            delete newEditors[id];\n            setEditors(newEditors);\n        } else {\n            newEditors[id] = value;\n            setEditors(newEditors);\n        }\n\n        // @ts-ignore\n        setUserConfig({ ...userConfig, Editors: Object.values(newEditors) })\n    };\n\n    const editorInputs = [];\n    for (const [key, value] of Object.entries(editors).sort()) {\n        editorInputs.push(<EditorInput key={key} editor={value} id={key} onChange={changeEditor} />);\n    }\n\n    const creatingNewEditor = Object.values(editors).filter(editor => editor.length === 0).length === 0;\n\n    if (managing !== \"\") {\n        return null;\n    }\n\n    return <>\n        {editorInputs}\n        {creatingNewEditor && <div className=\"bg-green-700 rounded shadow p-3 cursor-pointer hover:bg-green-600\" onClick={() => {\n            const newEditors = { ...editors };\n            newEditors[\"e\" + (Object.values(editors).length + 1)] = \"\";\n            setEditors(newEditors);\n        }}>add editor</div>}\n    </>\n}\n\nfunction EditorInput({ id, editor, onChange }: { id: string, editor: string, onChange: (id: string, value: string | null) => void }) {\n    const [value, setValue] = useState(editor);\n    const ref = useRef<HTMLInputElement>(null);\n\n    const handleKeyPress = (e: KeyboardEvent) => {\n        if (e.keyCode === 13) {\n            if (ref.current !== null) {\n                ref.current.blur();\n            }\n        }\n    };\n\n    return <div className=\"flex items-center\">\n        <input className=\"bg-blue-900 hover:bg-blue-800 focus:bg-blue:800 p-3 rounded shadow w-24 rounded-r-none truncate\" spellCheck={false} ref={ref} type=\"text\" value={value} onKeyDown={(e) => handleKeyPress(e)} onChange={(e) => setValue(e.target.value)} onBlur={() => onChange(id, value)} key={editor} />\n        <span className=\"bg-red-900 p-3 px-1 font-bold opacity-25 hover:opacity-100 cursor-pointer rounded rounded-l-none\" onClick={() => onChange(id, null)}>X</span>\n    </div>;\n}","import { useForm } from \"react-hook-form\";\nimport { SetUserConfig, UserConfig } from \"../../hooks/useUserConfig\";\n\ninterface BttvRewardForm {\n    title: string;\n    cost: string;\n    backgroundColor: string;\n    maxPerStream: string;\n    maxPerUserPerStream: string;\n    globalCooldownMinutes: string;\n    enabled: boolean;\n    isDefault: boolean\n}\n\nexport function BttvForm({ userConfig, setUserConfig }: { userConfig: UserConfig, setUserConfig: SetUserConfig }) {\n    const { register, handleSubmit, formState: { errors } } = useForm();\n    const onSubmit = (data: BttvRewardForm) => setUserConfig(\n        {\n            ...userConfig,\n            Rewards: {\n                ...userConfig?.Rewards,\n                Bttv: {\n                    ...data,\n                    isDefault: false,\n                    cost: Number(data.cost),\n                    maxPerStream: Number(data.maxPerStream),\n                    maxPerUserPerStream: Number(data.maxPerUserPerStream),\n                    globalCooldownSeconds: Number(data.globalCooldownMinutes) * 60\n                }\n            }\n        }\n    );\n\n    return (\n        <form onSubmit={handleSubmit(onSubmit)} className=\"max-w-5xl m-4 p-4 bg-gray-800 rounded shadow\">\n            <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-5\">\n                    <img src=\"/images/bttv.png\" alt=\"Bttv Emote Reward\" className=\"w-16\" />\n                    <h3 className=\"text-xl font-bold\">BetterTTV Emote</h3>\n                </div>\n                <div className=\"text-gray-600\">\n                    {userConfig.Rewards.Bttv?.ID}\n                </div>\n            </div>\n            <p className=\"my-2 mb-4 text-gray-400\">\n                <strong>Make sure <span className=\"text-green-600\">gempbot</span> is BetterTTV editor</strong><br />\n                This will swap out 1 emote constantly. If the previous emote is not found it will use a free slot or remove a random emote.\n            </p>\n\n            <label className=\"block\">\n                Title\n                <input defaultValue={userConfig.Rewards.Bttv?.title} spellCheck={false} {...register(\"title\", { required: true })} className=\"form-input border-none bg-gray-700 mx-2 p-2 rounded shadow\" />\n                {errors.title && <span className=\"text-red-700\">required</span>}\n            </label>\n\n            <label className=\"block mt-3\">\n                Cost\n                <input defaultValue={userConfig.Rewards.Bttv?.cost} type=\"number\" spellCheck={false} {...register(\"cost\", { required: true })} className=\"form-input border-none bg-gray-700 mx-2 p-2 rounded shadow\" />\n                {errors.cost && <span className=\"text-red-700\">required</span>}\n            </label>\n\n            <label className=\"block mt-3\">\n                Prompt\n                <input defaultValue={userConfig.Rewards.Bttv?.prompt} spellCheck={false} disabled {...register(\"prompt\")} className=\"block cursor-not-allowed truncate form-input w-full opacity-25 border-none bg-gray-700 mt-2 p-2 rounded shadow\" />\n            </label>\n\n            <label className=\"block mt-3\">\n                Background Color\n                <input defaultValue={userConfig.Rewards.Bttv?.backgroundColor} placeholder=\"#FFFFFF\" spellCheck={false} {...register(\"backgroundColor\")} className=\"form-input border-none bg-gray-700 mx-2 p-2 rounded shadow\" />\n            </label>\n\n            <div className=\"mt-8 font-bold\">Limits <span className=\"text-gray-500\">(0 = unlimited)</span></div>\n\n            <label className=\"flex items-center mt-3\">\n                Max per Stream\n                <input defaultValue={userConfig.Rewards.Bttv?.maxPerStream} placeholder=\"0\" type=\"number\" spellCheck={false} {...register(\"maxPerStream\")} className=\"form-input border-none bg-gray-700 mx-2 p-2 rounded shadow\" />\n            </label>\n\n            <label className=\"flex items-center mt-3\">\n                Max per User per Stream\n                <input defaultValue={userConfig.Rewards.Bttv?.maxPerUserPerStream} placeholder=\"0\" type=\"number\" spellCheck={false} {...register(\"maxPerUserPerStream\")} className=\"form-input border-none bg-gray-700 mx-2 p-2 rounded shadow\" />\n            </label>\n\n            <label className=\"flex items-center mt-3\">\n                Global Cooldown in Minutes\n                <input defaultValue={(userConfig.Rewards.Bttv?.globalCooldownSeconds ?? 0) / 60} placeholder=\"0\" type=\"number\" spellCheck={false} {...register(\"globalCooldownMinutes\")} className=\"form-input border-none bg-gray-700 mx-2 p-2 rounded shadow\" />\n            </label>\n\n            <div className=\"flex flex-row justify-between items-center select-none\">\n                <label className=\"flex items-center\">\n                    <input defaultChecked={userConfig.Rewards.Bttv?.enabled} type=\"checkbox\" {...register(\"enabled\")} className=\"form-checkbox rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-offset-0 focus:ring-indigo-200 focus:ring-opacity-50\" />\n                    <span className=\"ml-2\">Enabled</span>\n                </label>\n                <input type=\"submit\" className=\"bg-green-700 hover:bg-green-600 p-2 rounded shadow block mt-3\" value=\"save\" />\n            </div>\n        </form>\n    );\n}","import { useState } from \"react\";\nimport { useUserConfig } from \"../../hooks/useUserConfig\";\nimport { Menu } from \"../Menu\";\nimport { BttvForm } from \"../RewardForms/BttvForm\";\n\nexport function Dashboard() {\n    const [renderKey, setRenderKey] = useState(1);\n    const [userCfg, setUserConfig] = useUserConfig(undefined, undefined, () => setRenderKey(renderKey + 1));\n\n    if (!userCfg) {\n        return null;\n    }\n\n    // force re-mount when switching the channel to manage, to re-render forms and their defaultValues\n    return <div key={renderKey}>\n        <Menu userConfig={userCfg} setUserConfig={setUserConfig} />\n        <BttvForm userConfig={userCfg} setUserConfig={setUserConfig} />\n    </div>\n}","import { useEffect, useState } from \"react\";\nimport { useDebounce } from \"react-use\";\nimport { doFetch, Method } from \"../service/doFetch\";\nimport { store } from \"../store\";\n\nexport interface UserConfig {\n    Editors: Array<string>;\n    Protected: Protected;\n    Rewards: Rewards;\n}\n\nexport interface Rewards {\n    Bttv: null | BttvReward\n}\n\nexport interface BttvReward {\n    title: string;\n    prompt?: string;\n    cost: number;\n    backgroundColor?: string;\n    isMaxPerStreamEnabled?: boolean;\n    maxPerStream?: number;\n    isUserInputRequired?: boolean;\n    isMaxPerUserPerStreamEnabled?: boolean;\n    maxPerUserPerStream?: number;\n    isGlobalCooldownEnabled?: boolean;\n    globalCooldownSeconds?: number;\n    shouldRedemptionsSkipRequestQueue?: boolean;\n    enabled?: boolean;\n    isDefault: boolean;\n    ID?: string;\n}\n\nexport interface Protected {\n    EditorFor: Array<string>;\n}\n\nexport type SetUserConfig = (userConfig: UserConfig | null) => void;\n\nexport function useUserConfig(onSave: () => void = () => { }, onError: () => void = () => { }, onUserConfigChange: () => void = () => {}): [UserConfig | null | undefined, SetUserConfig] {\n    const [userConfig, setUserConfig] = useState<UserConfig | null | undefined>(undefined);\n    const [changeCounter, setChangeCounter] = useState(0);\n    const managing = store.useState(s => s.managing);\n\n    const fetchConfig = () => {\n        let endPoint = \"/api/userConfig\";\n        if (managing) {\n            endPoint += `?managing=${managing}`;\n        }\n        doFetch(Method.GET, endPoint).then((userConfig) => setUserConfig(userConfig)).catch(onError)\n    };\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    useEffect(fetchConfig, [managing]);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    useEffect(onUserConfigChange, [userConfig]);\n\n    useDebounce(() => {\n        if (changeCounter && userConfig) {\n            let endPoint = \"/api/userConfig\";\n            if (managing) {\n                endPoint += `?managing=${managing}`;\n            }\n            doFetch(Method.POST, endPoint, userConfig).then((data: UserConfig) => {\n                setUserConfig(data);\n                onSave();\n            }).catch(onError);\n        } else if (changeCounter && userConfig === null) {\n            doFetch(Method.DELETE, \"/api/userConfig\").then(fetchConfig).catch(onError);\n        }\n    }, 500, [changeCounter]);\n\n    const setCfg = (config: UserConfig | null) => {\n        setUserConfig(config);\n        setChangeCounter(changeCounter + 1);\n    };\n\n    return [userConfig, setCfg]\n}","import { store } from \"../store\";\nimport { EventMessage } from \"../types/Events\";\n\nexport default class EventService {\n    constructor(callback: (data: EventMessage) => void) {\n        const apiBaseUrl = store.getRawState().apiBaseUrl\n\n        function connect() {\n            var ws = new WebSocket(`${apiBaseUrl.replace(\"https://\", \"wss://\").replace(\"http://\", \"ws://\")}/api/ws`);\n\n            ws.onmessage = (event) => {\n                callback(JSON.parse(event.data));\n            };\n\n            ws.onclose = e => {\n                console.log('Socket is closed. Reconnect will be attempted in 1 second.', e.reason);\n                setTimeout(connect, 1000);\n            };\n\n            ws.onerror = err => {\n                console.error('Socket encountered error: ', err, 'Closing socket');\n                ws.close();\n            };\n        }\n\n        connect();\n    }\n}\n\n","\n\nexport function Meta({ activeChannels, joinedChannels }: { [key: string]: number }) {\n    return <div className=\"flex flex-row\">\n        <div className=\"rounded shadow bg-gray-800 p-4 w-64 m-4\">\n            Joined Channels: <strong>{joinedChannels}</strong>\n        </div>\n        <div className=\"rounded shadow bg-gray-800 p-4 w-64 m-4 -ml-0\">\n            Active Channels: <strong>{activeChannels}</strong>\n        </div>\n    </div>\n}","export function ProfilePicture({ src }: { src: string } = { src: \"https://static-cdn.jtvnw.net/user-default-pictures-uv/cdd517fe-def4-11e9-948e-784f43822e80-profile_image-70x70.png\" }) {\r\n    return <img src={src} width={\"30\"} height={\"30\"} alt=\"profile\" />;\r\n}","import { Record } from \"../types/Events\";\nimport { ProfilePicture } from \"./ProfilePicture\";\n\nexport function Records({ records }: { records: Array<Record> }) {\n    return <div className=\"flex flex-row pl-4\">\n        {records.map(record => <RecordComponent key={record.title} record={record} />)}\n    </div>\n}\n\nfunction RecordComponent({ record }: { record: Record }) {\n    return <div className=\"bg-gray-800 rounded shadow p-4 w-64 mr-4 ml-0\">\n        <h2 className=\"text-1xl font-bold\">{record.title}</h2>\n        <ol>\n            {record.scores.map(score => <li key={score.user.id} className=\"flex flex-row justify-between items-center m-1\">\n                <ProfilePicture src={score.user.profilePicture} />\n                <span className=\"font-bold\">{score.user.displayName}</span>\n                <span className=\"font-bold\">{score.score}</span>\n            </li>)}\n        </ol>\n    </div>\n}","import { useEffect, useState } from \"react\";\nimport EventService from \"../../service/EventService\";\nimport { EventMessage, Record } from \"../../types/Events\";\nimport { Meta } from \"../Meta\";\nimport { Records } from \"../Records\";\n\nexport function Home() {\n    const [joinedChannels, setJoinedChannels] = useState(0);\n    const [activeChannels, setActiveChannels] = useState(0);\n    const [records, setRecords] = useState<Array<Record>>([])\n\n    useEffect(() => {\n        new EventService((message: EventMessage) => {\n            setJoinedChannels(message.joinedChannels);\n            setActiveChannels(message.activeChannels);\n            setRecords(message.records);\n        });\n    }, []);\n\n    return <div>\n        <Meta activeChannels={activeChannels} joinedChannels={joinedChannels} />\n        <Records records={records} />\n    </div>\n}","import {\n    BrowserRouter as Router,\n    Route, Switch\n} from \"react-router-dom\";\nimport { Navbar } from \"./components/Navbar\";\nimport { Dashboard } from \"./components/Routes/Dashboard\";\nimport { Home } from \"./components/Routes/Home\";\n\n\nexport function App() {\n    return <Router>\n        <Navbar />\n        <Switch>\n            <Route path=\"/dashboard\">\n                <Dashboard />\n            </Route>\n            <Route path=\"/\">\n                <Home />\n            </Route>\n        </Switch>\n    </Router>\n}","import { StrictMode } from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App';\nimport \"./index.css\";\n\nReactDOM.render(\n    <StrictMode>\n        <App />\n    </StrictMode>,\n    document.getElementById('root')\n);"],"sourceRoot":""}