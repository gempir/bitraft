(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var r,a,s,c=n(0),o=n(28),l=n.n(o),i=n(21),u=n(7);function d(e,t){var n=new URL("https://id.twitch.tv/oauth2/authorize");return n.searchParams.set("client_id",t),n.searchParams.set("redirect_uri",e+"/api/callback"),n.searchParams.set("response_type","code"),n.searchParams.set("scope","channel:read:redemptions channel:manage:redemptions"),n}function b(e){!function(e,t,n){var r=new Date;r.setTime(r.getTime()+864e5*n),document.cookie=e+"="+t+";path=/;expires="+r.toUTCString()}(e,"",-1)}var j=new(n(31).a)({twitchClientId:null!==(r="il5oqz0li81219qvw2hs7umntr493e")?r:"",apiBaseUrl:null!==(a="https://bitraft-api.gempir.com")?a:"",baseUrl:null!==(s="https://bitraft.gempir.com")?s:"",scToken:function(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null}("scToken"),managing:""}),m=n(1);function h(){var e=j.useState((function(e){return e.scToken})),t=Object(m.jsx)(p,{className:"p-4 rounded shadow bg-purple-800 hover:bg-purple-600"});return e&&(t=Object(m.jsx)(f,{})),Object(m.jsx)("div",{className:"m-4 flex flex-row justify-end gap-4",children:t})}function f(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(i.b,{to:"/",className:"p-4 rounded shadow bg-gray-800 hover:bg-gray-700",children:"Home"}),Object(m.jsx)(i.b,{to:"/dashboard",className:"p-4 rounded shadow bg-blue-900 hover:bg-blue-800",children:"Dashboard"}),Object(m.jsx)(p,{className:"p-4 rounded shadow opacity-25 bg-purple-800 hover:bg-purple-600"})]})}function p(e){var t=e.className,n=j.getRawState(),r=d(n.apiBaseUrl,n.twitchClientId);return Object(m.jsx)("a",{className:t,href:r.toString(),children:"Login"})}var x,g=n(3),O=n(48),v=n(49),w=n(4),y=n.n(w),N=n(2),C=n(9);function k(e,t){return S.apply(this,arguments)}function S(){return(S=Object(C.a)(y.a.mark((function e(t,n){var r,a,s,c,o,l,i=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:void 0,a=j.getRawState(),s=a.apiBaseUrl,c=a.scToken,o={"content-type":"application/json"},c&&(o.Authorization="Bearer ".concat(c)),l={method:t,headers:Object(N.a)({},o)},r&&(l.body=JSON.stringify(r)),e.abrupt("return",window.fetch("".concat(s).concat(n),l).then(function(){var e=Object(C.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==t.status){e.next=4;break}return b("scToken"),window.location.assign("/"),e.abrupt("return");case 4:if(!t.ok){e.next=10;break}return e.next=7,t.json();case 7:return e.abrupt("return",e.sent);case 10:return e.next=12,t.text();case 12:return n=e.sent,e.abrupt("return",Promise.reject(new Error(n)));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e.GET="GET",e.POST="POST",e.DELETE="POST"}(x||(x={}));var T=n(5);function P(e){var t=e.userConfig;if(0===(null===t||void 0===t?void 0:t.Protected.EditorFor.length))return null;var n=j.useState((function(e){return e.managing}));return Object(m.jsx)("div",{className:"Managing",children:Object(m.jsxs)("select",{className:"bg-gray-800 shadow rounded p-3",onChange:function(e){return j.update((function(t){t.managing=e.target.value}))},value:n,children:[null===t||void 0===t?void 0:t.Protected.EditorFor.map((function(e){return Object(m.jsx)("option",{value:e,children:e},e)})),Object(m.jsx)("option",{value:"",children:"you"})]})})}function B(e){var t=e.setUserConfig;return""!==j.useState((function(e){return e.managing}))?null:Object(m.jsx)("div",{className:"p-3 opacity-25 hover:opacity-100 bg-red-900 hover:bg-red-800 shadow rounded cursor-pointer",onClick:function(){window.confirm("Do you really want to reset?\n- Channel Point Rewards on Twitch from bitraft\n- Settings on bitraft.gempir.com\n- Unsubscribes all webhooks for your channel")&&t(null)},children:"Reset"})}function U(e){var t=e.userConfig,n=e.setUserConfig;return Object(m.jsxs)("div",{className:"flex flex-row flex-wrap gap-4 ml-4",children:[Object(m.jsx)(P,{userConfig:t}),Object(m.jsx)(B,{setUserConfig:n}),Object(m.jsx)(E,{setUserConfig:n,userConfig:t})]})}function E(e){var t=e.setUserConfig,n=e.userConfig,r=j.useState((function(e){return e.managing})),a={};null===n||void 0===n||n.Editors.map((function(e){return a["e"+(Object.values(a).length+1)]=e,e}));var s,o=Object(c.useState)(a),l=Object(g.a)(o,2),i=l[0],u=l[1],d=function(e,r){var a=Object(N.a)({},i);null===r?(delete a[e],u(a)):(a[e]=r,u(a)),t(Object(N.a)(Object(N.a)({},n),{},{Editors:Object.values(a)}))},b=[],h=Object(T.a)(Object.entries(i).sort());try{for(h.s();!(s=h.n()).done;){var f=Object(g.a)(s.value,2),p=f[0],x=f[1];b.push(Object(m.jsx)(R,{editor:x,id:p,onChange:d},p))}}catch(v){h.e(v)}finally{h.f()}var O=0===Object.values(i).filter((function(e){return 0===e.length})).length;return""!==r?null:Object(m.jsxs)(m.Fragment,{children:[b,O&&Object(m.jsx)("div",{className:"bg-green-700 rounded shadow p-3 cursor-pointer hover:bg-green-600",onClick:function(){var e=Object(N.a)({},i);e["e"+(Object.values(i).length+1)]="",u(e)},children:"add editor"})]})}function R(e){var t=e.id,n=e.editor,r=e.onChange,a=Object(c.useState)(n),s=Object(g.a)(a,2),o=s[0],l=s[1],i=Object(c.useRef)(null);return Object(m.jsxs)("div",{className:"flex items-center",children:[Object(m.jsx)("input",{className:"bg-blue-900 hover:bg-blue-800 focus:bg-blue:800 p-3 rounded shadow w-24 rounded-r-none truncate",spellCheck:!1,ref:i,type:"text",value:o,onKeyDown:function(e){return function(e){13===e.keyCode&&null!==i.current&&i.current.blur()}(e)},onChange:function(e){return l(e.target.value)},onBlur:function(){return r(t,o)}},n),Object(m.jsx)("span",{className:"bg-red-900 p-3 px-1 font-bold opacity-25 hover:opacity-100 cursor-pointer rounded rounded-l-none",onClick:function(){return r(t,null)},children:"X"})]})}var V=n(30);function F(e){var t,n,r,a,s,c,o,l,i,u,d=e.userConfig,b=e.setUserConfig,j=Object(V.a)(),h=j.register,f=j.handleSubmit,p=j.formState.errors;return Object(m.jsxs)("form",{onSubmit:f((function(e){return b(Object(N.a)(Object(N.a)({},d),{},{Rewards:Object(N.a)(Object(N.a)({},null===d||void 0===d?void 0:d.Rewards),{},{Bttv:Object(N.a)(Object(N.a)({},e),{},{isDefault:!1,cost:Number(e.cost),maxPerStream:Number(e.maxPerStream),maxPerUserPerStream:Number(e.maxPerUserPerStream),globalCooldownSeconds:60*Number(e.globalCooldownMinutes)})})}))})),className:"max-w-5xl m-4 p-4 bg-gray-800 rounded shadow",children:[Object(m.jsxs)("div",{className:"flex items-center justify-between",children:[Object(m.jsxs)("div",{className:"flex items-center gap-5",children:[Object(m.jsx)("img",{src:"/images/bttv.png",alt:"Bttv Emote Reward",className:"w-16"}),Object(m.jsx)("h3",{className:"text-xl font-bold",children:"BetterTTV Emote"})]}),Object(m.jsx)("div",{className:"text-gray-600",children:null===(t=d.Rewards.Bttv)||void 0===t?void 0:t.ID})]}),Object(m.jsxs)("p",{className:"my-2 mb-4 text-gray-400",children:[Object(m.jsxs)("strong",{children:["Make sure ",Object(m.jsx)("span",{className:"text-green-600",children:"gempbot"})," is BetterTTV editor"]}),Object(m.jsx)("br",{}),"This will swap out 1 emote constantly. If the previous emote is not found it will use a free slot or remove a random emote."]}),Object(m.jsxs)("label",{className:"block",children:["Title",Object(m.jsx)("input",Object(N.a)(Object(N.a)({defaultValue:null===(n=d.Rewards.Bttv)||void 0===n?void 0:n.title,spellCheck:!1},h("title",{required:!0})),{},{className:"form-input border-none bg-gray-700 mx-2 p-2 rounded shadow"})),p.title&&Object(m.jsx)("span",{className:"text-red-700",children:"required"})]}),Object(m.jsxs)("label",{className:"block mt-3",children:["Cost",Object(m.jsx)("input",Object(N.a)(Object(N.a)({defaultValue:null===(r=d.Rewards.Bttv)||void 0===r?void 0:r.cost,type:"number",spellCheck:!1},h("cost",{required:!0})),{},{className:"form-input border-none bg-gray-700 mx-2 p-2 rounded shadow"})),p.cost&&Object(m.jsx)("span",{className:"text-red-700",children:"required"})]}),Object(m.jsxs)("label",{className:"block mt-3",children:["Prompt",Object(m.jsx)("input",Object(N.a)(Object(N.a)({defaultValue:null===(a=d.Rewards.Bttv)||void 0===a?void 0:a.prompt,spellCheck:!1,disabled:!0},h("prompt")),{},{className:"block cursor-not-allowed truncate form-input w-full opacity-25 border-none bg-gray-700 mt-2 p-2 rounded shadow"}))]}),Object(m.jsxs)("label",{className:"block mt-3",children:["Background Color",Object(m.jsx)("input",Object(N.a)(Object(N.a)({defaultValue:null===(s=d.Rewards.Bttv)||void 0===s?void 0:s.backgroundColor,placeholder:"#FFFFFF",spellCheck:!1},h("backgroundColor")),{},{className:"form-input border-none bg-gray-700 mx-2 p-2 rounded shadow"}))]}),Object(m.jsxs)("div",{className:"mt-8 font-bold",children:["Limits ",Object(m.jsx)("span",{className:"text-gray-500",children:"(0 = unlimited)"})]}),Object(m.jsxs)("label",{className:"flex items-center mt-3",children:["Max per Stream",Object(m.jsx)("input",Object(N.a)(Object(N.a)({defaultValue:null===(c=d.Rewards.Bttv)||void 0===c?void 0:c.maxPerStream,placeholder:"0",type:"number",spellCheck:!1},h("maxPerStream")),{},{className:"form-input border-none bg-gray-700 mx-2 p-2 rounded shadow"}))]}),Object(m.jsxs)("label",{className:"flex items-center mt-3",children:["Max per User per Stream",Object(m.jsx)("input",Object(N.a)(Object(N.a)({defaultValue:null===(o=d.Rewards.Bttv)||void 0===o?void 0:o.maxPerUserPerStream,placeholder:"0",type:"number",spellCheck:!1},h("maxPerUserPerStream")),{},{className:"form-input border-none bg-gray-700 mx-2 p-2 rounded shadow"}))]}),Object(m.jsxs)("label",{className:"flex items-center mt-3",children:["Global Cooldown in Minutes",Object(m.jsx)("input",Object(N.a)(Object(N.a)({defaultValue:(null!==(l=null===(i=d.Rewards.Bttv)||void 0===i?void 0:i.globalCooldownSeconds)&&void 0!==l?l:0)/60,placeholder:"0",type:"number",spellCheck:!1},h("globalCooldownMinutes")),{},{className:"form-input border-none bg-gray-700 mx-2 p-2 rounded shadow"}))]}),Object(m.jsxs)("div",{className:"flex flex-row justify-between items-center select-none",children:[Object(m.jsxs)("label",{className:"flex items-center",children:[Object(m.jsx)("input",Object(N.a)(Object(N.a)({defaultChecked:null===(u=d.Rewards.Bttv)||void 0===u?void 0:u.enabled,type:"checkbox"},h("enabled")),{},{className:"form-checkbox rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-offset-0 focus:ring-indigo-200 focus:ring-opacity-50"})),Object(m.jsx)("span",{className:"ml-2",children:"Enabled"})]}),Object(m.jsx)("input",{type:"submit",className:"bg-green-700 hover:bg-green-600 p-2 rounded shadow block mt-3",value:"save"})]})]})}function D(){Object(O.a)("bitraft - Dashboard");var e=Object(c.useState)(1),t=Object(g.a)(e,2),n=t[0],r=t[1],a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=Object(c.useState)(void 0),a=Object(g.a)(r,2),s=a[0],o=a[1],l=Object(c.useState)(0),i=Object(g.a)(l,2),u=i[0],d=i[1],b=j.useState((function(e){return e.managing})),m=function(){var e="/api/userConfig";b&&(e+="?managing=".concat(b)),k(x.GET,e).then((function(e){return o(e)})).catch(t)};return Object(c.useEffect)(m,[b]),Object(c.useEffect)(n,[s]),Object(v.a)((function(){if(u&&s){var n="/api/userConfig";b&&(n+="?managing=".concat(b)),k(x.POST,n,s).then((function(t){o(t),e()})).catch(t)}else u&&null===s&&k(x.DELETE,"/api/userConfig").then(m).catch(t)}),500,[u]),[s,function(e){o(e),d(u+1)}]}(void 0,void 0,(function(){return r(n+1)})),s=Object(g.a)(a,2),o=s[0],l=s[1];return o?Object(m.jsxs)("div",{children:[Object(m.jsx)(U,{userConfig:o,setUserConfig:l}),Object(m.jsx)(F,{userConfig:o,setUserConfig:l})]},n):null}function I(){var e=j.useState((function(e){return{apiBaseUrl:e.apiBaseUrl,twitchClientId:e.twitchClientId}})),t=d(e.apiBaseUrl,e.twitchClientId);return Object(m.jsx)("section",{className:"text-gray-600 body-font",children:Object(m.jsxs)("div",{className:"container px-5 py-24 mx-auto",children:[Object(m.jsxs)("div",{className:"flex flex-col text-center w-full mb-20",children:[Object(m.jsx)("h2",{className:"text-xs text-indigo-400 tracking-widest font-medium title-font mb-1",children:"bitraft"}),Object(m.jsx)("h1",{className:"sm:text-3xl text-2xl font-medium title-font mb-4 text-gray-100",children:"Channel Point Rewards"}),Object(m.jsx)("p",{className:"lg:w-2/3 mx-auto leading-relaxed text-base",children:"Offer your viewers special channel point rewards"})]}),Object(m.jsx)("div",{className:"flex flex-wrap",children:Object(m.jsxs)("div",{className:"xl:w-1/4 lg:w-1/2 md:w-full px-8 py-6 border-l-2 border-gray-200 border-opacity-60",children:[Object(m.jsx)("h2",{className:"text-lg sm:text-xl text-gray-100 font-medium title-font mb-2",children:"BetterTTV Emotes"}),Object(m.jsx)("p",{className:"leading-relaxed text-base mb-4 text-gray-400",children:"Allow viewers to add new BetterTTV emotes to your chat"})]})}),Object(m.jsx)("div",{className:"flex justify-center",children:Object(m.jsx)("a",{className:"m-auto mx-auto mt-16 text-white bg-purple-800 hover:bg-purple-600 border-0 py-2 px-8 focus:outline-none rounded text-lg",href:t.toString(),children:"Login to Get Started"})})]})})}function M(){return Object(O.a)("bitraft"),Object(m.jsx)("div",{children:Object(m.jsx)(I,{})})}function q(){return Object(m.jsxs)(i.a,{children:[Object(m.jsx)(h,{}),Object(m.jsxs)(u.c,{children:[Object(m.jsx)(u.a,{path:"/dashboard",children:Object(m.jsx)(D,{})}),Object(m.jsx)(u.a,{path:"/",children:Object(m.jsx)(M,{})})]})]})}n(46);l.a.render(Object(m.jsx)(c.StrictMode,{children:Object(m.jsx)(q,{})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.2679136d.chunk.js.map